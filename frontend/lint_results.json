[{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\auth\\callback\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\components\\AIChat.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\components\\EngagementWidgets.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\components\\LoadingSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\components\\OnboardingWizard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\components\\SuggestedPortfolio.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":77,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2146,2149],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2146,2149],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\nimport { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport axios from 'axios';\r\n\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api';\r\n\r\ninterface Stock {\r\n    ticker: string;\r\n    sector: string;\r\n    price: number;\r\n    super_score: number;\r\n    p_l: number;\r\n    dividend_yield: number;\r\n    roe: number;\r\n    liquidity: number;\r\n    reason: string;\r\n}\r\n\r\ninterface PortfolioData {\r\n    profile: string;\r\n    criteria: {\r\n        description: string;\r\n        objective: string;\r\n        filters: string;\r\n    };\r\n    stocks: Stock[];\r\n    disclaimer: string;\r\n}\r\n\r\nconst PROFILES = [\r\n    {\r\n        id: 'conservador',\r\n        name: 'Conservador',\r\n        icon: 'üõ°Ô∏è',\r\n        description: 'Foco em dividendos e seguran√ßa'\r\n    },\r\n    {\r\n        id: 'moderado',\r\n        name: 'Moderado',\r\n        icon: '‚öñÔ∏è',\r\n        description: 'Equil√≠brio entre renda e crescimento'\r\n    },\r\n    {\r\n        id: 'agressivo',\r\n        name: 'Agressivo',\r\n        icon: 'üöÄ',\r\n        description: 'Foco em crescimento e valoriza√ß√£o'\r\n    }\r\n];\r\n\r\nexport default function SuggestedPortfolio() {\r\n    const [selectedProfile, setSelectedProfile] = useState<string>('moderado');\r\n    const [portfolio, setPortfolio] = useState<PortfolioData | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        let abortController: AbortController | null = null;\r\n\r\n        const fetchPortfolio = async () => {\r\n            if (abortController) abortController.abort();\r\n            abortController = new AbortController();\r\n\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            try {\r\n                const response = await axios.post(\r\n                    `${API_URL}/portfolio/suggested`,\r\n                    { profile: selectedProfile },\r\n                    { signal: abortController.signal }\r\n                );\r\n                setPortfolio(response.data);\r\n            } catch (error: any) {\r\n                if (axios.isCancel(error)) return;\r\n                console.error('Error fetching portfolio:', error);\r\n                setError('Erro ao gerar sugest√£o. Tente novamente.');\r\n            } finally {\r\n                if (abortController && !abortController.signal.aborted) {\r\n                    setLoading(false);\r\n                }\r\n            }\r\n        };\r\n\r\n        if (isOpen) {\r\n            fetchPortfolio();\r\n        }\r\n\r\n        return () => {\r\n            if (abortController) abortController.abort();\r\n        };\r\n    }, [selectedProfile, isOpen]);\r\n\r\n    const formatCurrency = (value: number) => {\r\n        return new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(value);\r\n    };\r\n\r\n    const formatLiquidity = (value: number) => {\r\n        if (value >= 1_000_000_000) return `${(value / 1_000_000_000).toFixed(1)}B`;\r\n        if (value >= 1_000_000) return `${(value / 1_000_000).toFixed(1)}M`;\r\n        if (value >= 1_000) return `${(value / 1_000).toFixed(1)}K`;\r\n        return value.toString();\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {/* Floating Button */}\r\n            <motion.button\r\n                onClick={() => setIsOpen(true)}\r\n                className=\"fixed bottom-24 right-6 z-40\"\r\n                whileHover={{ scale: 1.05 }}\r\n                whileTap={{ scale: 0.95 }}\r\n                style={{\r\n                    background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\r\n                    borderRadius: '1rem',\r\n                    padding: '0.75rem 1.25rem',\r\n                    color: 'white',\r\n                    fontWeight: 600,\r\n                    boxShadow: '0 4px 20px rgba(16, 185, 129, 0.4)',\r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.5rem'\r\n                }}\r\n            >\r\n                <span style={{ fontSize: '1.25rem' }}>üíº</span>\r\n                <span>Minha Carteira</span>\r\n            </motion.button>\r\n\r\n            {/* Modal */}\r\n            <AnimatePresence>\r\n                {isOpen && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        onClick={() => setIsOpen(false)}\r\n                        style={{\r\n                            position: 'fixed',\r\n                            inset: 0,\r\n                            background: 'rgba(0, 0, 0, 0.7)',\r\n                            backdropFilter: 'blur(4px)',\r\n                            zIndex: 50,\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            padding: '1rem'\r\n                        }}\r\n                    >\r\n                        <motion.div\r\n                            initial={{ scale: 0.9, opacity: 0 }}\r\n                            animate={{ scale: 1, opacity: 1 }}\r\n                            exit={{ scale: 0.9, opacity: 0 }}\r\n                            onClick={(e) => e.stopPropagation()}\r\n                            style={{\r\n                                background: 'linear-gradient(180deg, #1f2937 0%, #111827 100%)',\r\n                                borderRadius: '1.5rem',\r\n                                maxWidth: '900px',\r\n                                width: '100%',\r\n                                maxHeight: '90vh',\r\n                                overflow: 'auto',\r\n                                border: '1px solid rgba(16, 185, 129, 0.2)',\r\n                                boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.5)'\r\n                            }}\r\n                        >\r\n                            {/* Header */}\r\n                            <div style={{\r\n                                padding: '1.5rem',\r\n                                borderBottom: '1px solid rgba(255,255,255,0.1)',\r\n                                display: 'flex',\r\n                                justifyContent: 'space-between',\r\n                                alignItems: 'center'\r\n                            }}>\r\n                                <div>\r\n                                    <h2 style={{\r\n                                        color: 'white',\r\n                                        fontSize: '1.5rem',\r\n                                        fontWeight: 700,\r\n                                        margin: 0\r\n                                    }}>\r\n                                        üíº Carteira Sugerida\r\n                                    </h2>\r\n                                    <p style={{ color: 'rgba(255,255,255,0.6)', margin: '0.25rem 0 0', fontSize: '0.9rem' }}>\r\n                                        Selecionamos 5 a√ß√µes baseadas no seu perfil\r\n                                    </p>\r\n                                </div>\r\n                                <button\r\n                                    onClick={() => setIsOpen(false)}\r\n                                    style={{\r\n                                        background: 'rgba(255,255,255,0.1)',\r\n                                        border: 'none',\r\n                                        borderRadius: '0.5rem',\r\n                                        color: 'white',\r\n                                        padding: '0.5rem 1rem',\r\n                                        cursor: 'pointer'\r\n                                    }}\r\n                                >\r\n                                    ‚úï\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Profile Selector */}\r\n                            <div style={{ padding: '1rem 1.5rem' }}>\r\n                                <p style={{ color: 'rgba(255,255,255,0.7)', marginBottom: '0.75rem', fontSize: '0.9rem' }}>\r\n                                    Selecione seu perfil de investidor:\r\n                                </p>\r\n                                <div style={{ display: 'flex', gap: '1rem' }}>\r\n                                    {PROFILES.map(profile => (\r\n                                        <motion.button\r\n                                            key={profile.id}\r\n                                            onClick={() => setSelectedProfile(profile.id)}\r\n                                            whileHover={{ scale: 1.02 }}\r\n                                            whileTap={{ scale: 0.98 }}\r\n                                            style={{\r\n                                                flex: 1,\r\n                                                padding: '1rem',\r\n                                                borderRadius: '1rem',\r\n                                                border: selectedProfile === profile.id\r\n                                                    ? '2px solid #10b981'\r\n                                                    : '1px solid rgba(255,255,255,0.1)',\r\n                                                background: selectedProfile === profile.id\r\n                                                    ? 'rgba(16, 185, 129, 0.15)'\r\n                                                    : 'rgba(255,255,255,0.05)',\r\n                                                cursor: 'pointer',\r\n                                                textAlign: 'center'\r\n                                            }}\r\n                                        >\r\n                                            <span style={{ fontSize: '2rem', display: 'block' }}>{profile.icon}</span>\r\n                                            <span style={{\r\n                                                color: 'white',\r\n                                                fontWeight: 600,\r\n                                                display: 'block',\r\n                                                marginTop: '0.5rem'\r\n                                            }}>\r\n                                                {profile.name}\r\n                                            </span>\r\n                                            <span style={{\r\n                                                color: 'rgba(255,255,255,0.5)',\r\n                                                fontSize: '0.75rem',\r\n                                                display: 'block',\r\n                                                marginTop: '0.25rem'\r\n                                            }}>\r\n                                                {profile.description}\r\n                                            </span>\r\n                                        </motion.button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Portfolio Content */}\r\n                            <div style={{ padding: '0 1.5rem 1.5rem' }}>\r\n                                {loading ? (\r\n                                    <div style={{ textAlign: 'center', padding: '3rem', color: 'white' }}>\r\n                                        <div className=\"animate-spin\" style={{\r\n                                            width: '40px',\r\n                                            height: '40px',\r\n                                            border: '3px solid rgba(16, 185, 129, 0.3)',\r\n                                            borderTopColor: '#10b981',\r\n                                            borderRadius: '50%',\r\n                                            margin: '0 auto 1rem'\r\n                                        }}></div>\r\n                                        Analisando melhores a√ß√µes...\r\n                                    </div>\r\n                                ) : portfolio ? (\r\n                                    <>\r\n                                        {/* Criteria Info */}\r\n                                        <div style={{\r\n                                            background: 'rgba(16, 185, 129, 0.1)',\r\n                                            borderRadius: '0.75rem',\r\n                                            padding: '1rem',\r\n                                            marginBottom: '1rem'\r\n                                        }}>\r\n                                            <p style={{ color: '#10b981', fontWeight: 600, margin: 0 }}>\r\n                                                {portfolio.criteria.description}\r\n                                            </p>\r\n                                            <p style={{ color: 'rgba(255,255,255,0.6)', fontSize: '0.85rem', margin: '0.25rem 0 0' }}>\r\n                                                üéØ {portfolio.criteria.objective}\r\n                                            </p>\r\n                                        </div>\r\n\r\n                                        {/* Stocks Table */}\r\n                                        <div style={{ overflowX: 'auto' }}>\r\n                                            <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                                                <thead>\r\n                                                    <tr style={{ borderBottom: '1px solid rgba(255,255,255,0.1)' }}>\r\n                                                        <th style={{ textAlign: 'left', padding: '0.75rem', color: 'rgba(255,255,255,0.7)', fontSize: '0.8rem' }}>A√ß√£o</th>\r\n                                                        <th style={{ textAlign: 'left', padding: '0.75rem', color: 'rgba(255,255,255,0.7)', fontSize: '0.8rem' }}>Setor</th>\r\n                                                        <th style={{ textAlign: 'right', padding: '0.75rem', color: 'rgba(255,255,255,0.7)', fontSize: '0.8rem' }}>Cota√ß√£o</th>\r\n                                                        <th style={{ textAlign: 'right', padding: '0.75rem', color: 'rgba(255,255,255,0.7)', fontSize: '0.8rem' }}>Score</th>\r\n                                                        <th style={{ textAlign: 'right', padding: '0.75rem', color: 'rgba(255,255,255,0.7)', fontSize: '0.8rem' }}>DY</th>\r\n                                                        <th style={{ textAlign: 'right', padding: '0.75rem', color: 'rgba(255,255,255,0.7)', fontSize: '0.8rem' }}>Liquidez</th>\r\n                                                        <th style={{ textAlign: 'left', padding: '0.75rem', color: 'rgba(255,255,255,0.7)', fontSize: '0.8rem' }}>Por qu√™?</th>\r\n                                                    </tr>\r\n                                                </thead>\r\n                                                <tbody>\r\n                                                    {portfolio.stocks.map((stock, i) => (\r\n                                                        <motion.tr\r\n                                                            key={stock.ticker}\r\n                                                            initial={{ opacity: 0, y: 10 }}\r\n                                                            animate={{ opacity: 1, y: 0 }}\r\n                                                            transition={{ delay: i * 0.1 }}\r\n                                                            style={{ borderBottom: '1px solid rgba(255,255,255,0.05)' }}\r\n                                                        >\r\n                                                            <td style={{ padding: '1rem 0.75rem' }}>\r\n                                                                <span style={{ color: '#10b981', fontWeight: 700 }}>{stock.ticker}</span>\r\n                                                            </td>\r\n                                                            <td style={{ padding: '1rem 0.75rem', color: 'rgba(255,255,255,0.8)' }}>\r\n                                                                {stock.sector}\r\n                                                            </td>\r\n                                                            <td style={{ padding: '1rem 0.75rem', color: 'white', textAlign: 'right' }}>\r\n                                                                {formatCurrency(stock.price)}\r\n                                                            </td>\r\n                                                            <td style={{ padding: '1rem 0.75rem', textAlign: 'right' }}>\r\n                                                                <span style={{\r\n                                                                    background: 'rgba(139, 92, 246, 0.2)',\r\n                                                                    color: '#a78bfa',\r\n                                                                    padding: '0.25rem 0.5rem',\r\n                                                                    borderRadius: '0.25rem',\r\n                                                                    fontWeight: 600\r\n                                                                }}>\r\n                                                                    {stock.super_score}\r\n                                                                </span>\r\n                                                            </td>\r\n                                                            <td style={{ padding: '1rem 0.75rem', color: '#10b981', textAlign: 'right', fontWeight: 600 }}>\r\n                                                                {stock.dividend_yield}%\r\n                                                            </td>\r\n                                                            <td style={{ padding: '1rem 0.75rem', color: 'rgba(255,255,255,0.6)', textAlign: 'right' }}>\r\n                                                                R$ {formatLiquidity(stock.liquidity)}\r\n                                                            </td>\r\n                                                            <td style={{ padding: '1rem 0.75rem', color: 'rgba(255,255,255,0.6)', fontSize: '0.85rem' }}>\r\n                                                                {stock.reason}\r\n                                                            </td>\r\n                                                        </motion.tr>\r\n                                                    ))}\r\n                                                </tbody>\r\n                                            </table>\r\n                                        </div>\r\n\r\n                                        {/* Disclaimer */}\r\n                                        <p style={{\r\n                                            color: 'rgba(255,255,255,0.4)',\r\n                                            fontSize: '0.75rem',\r\n                                            marginTop: '1rem',\r\n                                            textAlign: 'center'\r\n                                        }}>\r\n                                            ‚ö†Ô∏è {portfolio.disclaimer}\r\n                                        </p>\r\n                                    </>\r\n                                ) : error ? (\r\n                                    <div style={{ textAlign: 'center', padding: '3rem', color: '#ff6b6b' }}>\r\n                                        <p style={{ fontSize: '3rem', marginBottom: '1rem' }}>‚ö†Ô∏è</p>\r\n                                        <p>{error}</p>\r\n                                    </div>\r\n                                ) : null}\r\n                            </div>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\contexts\\AuthContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":44,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":93,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":96,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3113,3116],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3113,3116],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { createContext, useContext, useState, useEffect, ReactNode, useCallback } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport axios from 'axios';\r\nimport { supabase } from '@/lib/supabase';\r\n\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api';\r\n\r\ninterface User {\r\n    username: string;\r\n    name: string;\r\n    email: string;\r\n    is_premium: boolean;\r\n}\r\n\r\ninterface AuthContextType {\r\n    user: User | null;\r\n    isAuthenticated: boolean;\r\n    loading: boolean;\r\n    error: string | null;\r\n    login: (email: string, password: string) => Promise<boolean>;\r\n    register: (name: string, email: string, password: string) => Promise<boolean>;\r\n    loginWithGoogle: () => Promise<void>;\r\n    resendConfirmation: (email: string) => Promise<boolean>;\r\n    logout: () => void;\r\n    clearError: () => void;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n    const router = useRouter();\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const fetchUser = useCallback(async (token: string) => {\r\n        try {\r\n            const { data } = await axios.get(`${API_URL}/auth/me`, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n            setUser(data);\r\n        } catch (err) {\r\n            // Token invalid or expired\r\n            localStorage.removeItem('token');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    // Check for existing session on mount\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('token');\r\n        if (token) {\r\n            fetchUser(token);\r\n        } else {\r\n            setLoading(false);\r\n        }\r\n    }, [fetchUser]);\r\n\r\n    const login = async (email: string, password: string): Promise<boolean> => {\r\n        setError(null);\r\n        try {\r\n            const { data } = await axios.post(`${API_URL}/auth/login`, { email, password });\r\n            localStorage.setItem('token', data.access_token);\r\n            await fetchUser(data.access_token);\r\n            return true;\r\n        } catch (error: unknown) {\r\n            const err = error as { response?: { data?: { detail?: string } } };\r\n            const message = err.response?.data?.detail || 'Erro ao fazer login';\r\n            setError(message);\r\n            return false;\r\n        }\r\n    };\r\n\r\n    const register = async (name: string, email: string, password: string): Promise<boolean> => {\r\n        setError(null);\r\n        try {\r\n            await axios.post(`${API_URL}/auth/register`, { name, email, password });\r\n            // After registration, show success message - user needs to confirm email\r\n            setError('Conta criada! Verifique seu email para confirmar.');\r\n            return true;\r\n        } catch (error: unknown) {\r\n            const err = error as { response?: { status?: number, data?: { detail?: string | any[] } } };\r\n            // Handle 202 (Accepted) - email confirmation required\r\n            if (err.response?.status === 202) {\r\n                setError((typeof err.response.data?.detail === 'string' ? err.response.data.detail : '') || 'Conta criada! Verifique seu email para confirmar.');\r\n                return true;\r\n            }\r\n\r\n            // Handle Pydantic validation errors (422 - array of error objects)\r\n            const detail = err.response?.data?.detail;\r\n            let message = 'Erro ao criar conta';\r\n\r\n            if (Array.isArray(detail)) {\r\n                // Pydantic returns [{type, loc, msg, input, ctx}, ...]\r\n                const firstError = detail[0];\r\n                if (firstError?.msg) {\r\n                    // Map common Pydantic messages to Portuguese\r\n                    const msgLower = firstError.msg.toLowerCase();\r\n                    if (msgLower.includes('at least') || msgLower.includes('min_length')) {\r\n                        const field = firstError.loc?.[1] || 'campo';\r\n                        if (field === 'name') message = 'Nome deve ter pelo menos 2 caracteres';\r\n                        else if (field === 'password') message = 'Senha deve ter pelo menos 6 caracteres';\r\n                        else if (field === 'email') message = 'Email inv√°lido';\r\n                        else message = `${field}: ${firstError.msg}`;\r\n                    } else {\r\n                        message = firstError.msg;\r\n                    }\r\n                }\r\n            } else if (typeof detail === 'string') {\r\n                message = detail;\r\n            }\r\n\r\n            setError(message);\r\n            return false;\r\n        }\r\n    };\r\n\r\n    const loginWithGoogle = async () => {\r\n        const { error } = await supabase.auth.signInWithOAuth({\r\n            provider: 'google',\r\n            options: {\r\n                redirectTo: `${window.location.origin}/auth/callback`\r\n            }\r\n        });\r\n        if (error) {\r\n            setError(error.message);\r\n        }\r\n    };\r\n\r\n    const resendConfirmation = async (email: string): Promise<boolean> => {\r\n        try {\r\n            await axios.post(`${API_URL}/auth/resend-confirmation`, { email });\r\n            return true;\r\n        } catch (err) {\r\n            console.error(\"Error resending confirmation:\", err);\r\n            return false;\r\n        }\r\n    };\r\n\r\n    const logout = () => {\r\n        localStorage.removeItem('token');\r\n        setUser(null);\r\n        router.push('/login');\r\n    };\r\n\r\n    const clearError = () => setError(null);\r\n\r\n    return (\r\n        <AuthContext.Provider value={{\r\n            user,\r\n            isAuthenticated: !!user,\r\n            loading,\r\n            error,\r\n            login,\r\n            register,\r\n            loginWithGoogle,\r\n            resendConfirmation,\r\n            logout,\r\n            clearError\r\n        }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useAuth() {\r\n    const context = useContext(AuthContext);\r\n    if (context === undefined) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\forgot-password\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1192,1195],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1192,1195],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport Link from 'next/link';\r\nimport { Mail, ArrowRight, ArrowLeft, CheckCircle, AlertCircle } from 'lucide-react';\r\nimport { supabase } from '@/lib/supabase';\r\n\r\nexport default function ForgotPasswordPage() {\r\n    const [email, setEmail] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [success, setSuccess] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const { error } = await supabase.auth.resetPasswordForEmail(email, {\r\n                redirectTo: `${window.location.origin}/update-password`,\r\n            });\r\n\r\n            if (error) {\r\n                // Rate limit error usually\r\n                if (error.message.includes('rate limit')) {\r\n                    throw new Error('Muitas tentativas. Tente novamente em 60 segundos.');\r\n                }\r\n                throw error;\r\n            }\r\n\r\n            setSuccess(true);\r\n        } catch (err: any) {\r\n            setError(err.message || 'Erro ao enviar email de recupera√ß√£o.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#0B0C15] text-white flex items-center justify-center p-4 relative overflow-hidden\">\r\n            {/* Animated Background (Simplified from Login) */}\r\n            <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\r\n                <div className=\"absolute top-[-10%] right-[-5%] w-[500px] h-[500px] bg-purple-600/20 rounded-full blur-[100px] animate-pulse-slow\" />\r\n                <div className=\"absolute bottom-[-10%] left-[-5%] w-[500px] h-[500px] bg-cyan-600/10 rounded-full blur-[100px] animate-pulse-slow\" style={{ animationDelay: '1s' }} />\r\n            </div>\r\n\r\n            <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                className=\"w-full max-w-md bg-[#161726]/80 backdrop-blur-xl border border-white/5 p-8 rounded-3xl shadow-2xl relative z-10\"\r\n            >\r\n                <Link href=\"/login\" className=\"inline-flex items-center gap-2 text-sm text-gray-500 hover:text-white transition-colors mb-8\">\r\n                    <ArrowLeft className=\"w-4 h-4\" /> Voltar para Login\r\n                </Link>\r\n\r\n                <div className=\"mb-8\">\r\n                    <h1 className=\"text-3xl font-bold mb-2\">Recuperar Senha</h1>\r\n                    <p className=\"text-gray-400\">Digite seu email para receber o link de redefini√ß√£o.</p>\r\n                </div>\r\n\r\n                {success ? (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.95 }}\r\n                        animate={{ opacity: 1, scale: 1 }}\r\n                        className=\"bg-green-500/10 border border-green-500/20 rounded-xl p-6 text-center\"\r\n                    >\r\n                        <div className=\"w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4 text-green-400\">\r\n                            <CheckCircle className=\"w-6 h-6\" />\r\n                        </div>\r\n                        <h3 className=\"text-lg font-medium text-green-400 mb-2\">Email Enviado!</h3>\r\n                        <p className=\"text-gray-400 text-sm mb-6\">\r\n                            Verifique sua caixa de entrada (e spam) para redefinir sua senha.\r\n                        </p>\r\n                        <button\r\n                            onClick={() => setSuccess(false)}\r\n                            className=\"text-sm text-gray-500 hover:text-white underline\"\r\n                        >\r\n                            Tentar outro email\r\n                        </button>\r\n                    </motion.div>\r\n                ) : (\r\n                    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                        {error && (\r\n                            <div className=\"p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm flex items-center gap-2\">\r\n                                <AlertCircle className=\"w-4 h-4 shrink-0\" />\r\n                                {error}\r\n                            </div>\r\n                        )}\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-gray-400 mb-2\">Email cadastrado</label>\r\n                            <div className=\"relative\">\r\n                                <Mail className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500\" />\r\n                                <input\r\n                                    type=\"email\"\r\n                                    required\r\n                                    value={email}\r\n                                    onChange={(e) => setEmail(e.target.value)}\r\n                                    placeholder=\"exemplo@email.com\"\r\n                                    className=\"w-full bg-[#0B0C15] border border-white/10 rounded-xl px-12 py-3.5 text-white placeholder-gray-600 focus:outline-none focus:border-purple-500 transition-colors\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={loading}\r\n                            className=\"w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white font-bold py-3.5 rounded-xl transition-all shadow-lg shadow-purple-500/25 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                        >\r\n                            {loading ? 'Enviando...' : 'Enviar Link de Recupera√ß√£o'}\r\n                            {!loading && <ArrowRight className=\"w-5 h-5\" />}\r\n                        </button>\r\n                    </form>\r\n                )}\r\n            </motion.div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\login\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'authLoading' is assigned a value but never used.","line":12,"column":93,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":104},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\login\\page.tsx:35:9\n  33 |     useEffect(() => {\n  34 |         clearError();\n> 35 |         setValidationError(null);\n     |         ^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  36 |         setSuccessMessage(null);\n  37 |     }, [isLogin]);\n  38 |","line":35,"column":9,"nodeType":null,"endLine":35,"endColumn":27},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'clearError'. Either include it or remove the dependency array.","line":37,"column":8,"nodeType":"ArrayExpression","endLine":37,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [clearError, isLogin]","fix":{"range":[1414,1423],"text":"[clearError, isLogin]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { TrendingUp, Mail, Lock, User, ArrowRight, Sparkles, Eye, EyeOff, AlertCircle, Check } from 'lucide-react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nexport default function LoginPage() {\r\n    const router = useRouter();\r\n    const { login, register, loginWithGoogle, resendConfirmation, isAuthenticated, loading: authLoading, error, clearError } = useAuth();\r\n    const [isLogin, setIsLogin] = useState(true);\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [acceptedTerms, setAcceptedTerms] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        email: '',\r\n        password: '',\r\n        name: ''\r\n    });\r\n    const [validationError, setValidationError] = useState<string | null>(null);\r\n    const [successMessage, setSuccessMessage] = useState<string | null>(null);\r\n\r\n    // Redirect if already authenticated\r\n    useEffect(() => {\r\n        if (isAuthenticated) {\r\n            router.push('/');\r\n        }\r\n    }, [isAuthenticated, router]);\r\n\r\n    // Clear error when switching modes\r\n    useEffect(() => {\r\n        clearError();\r\n        setValidationError(null);\r\n        setSuccessMessage(null);\r\n    }, [isLogin]);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setValidationError(null);\r\n        setSuccessMessage(null);\r\n        clearError();\r\n\r\n        let success: boolean;\r\n        if (isLogin) {\r\n            success = await login(formData.email, formData.password);\r\n        } else {\r\n            if (!acceptedTerms) {\r\n                setValidationError(\"Voc√™ precisa concordar com os Termos de Uso e Pol√≠tica de Privacidade.\");\r\n                setLoading(false);\r\n                return;\r\n            }\r\n            success = await register(formData.name, formData.email, formData.password);\r\n        }\r\n\r\n        if (success) {\r\n            router.push('/');\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"login-page\">\r\n            {/* Animated Background */}\r\n            <div className=\"login-bg\">\r\n                {/* Animated orbs */}\r\n                <motion.div\r\n                    animate={{\r\n                        x: [0, 100, 0],\r\n                        y: [0, -50, 0],\r\n                        scale: [1, 1.2, 1],\r\n                    }}\r\n                    transition={{ duration: 20, repeat: Infinity, ease: \"easeInOut\" }}\r\n                    className=\"login-orb login-orb-violet\"\r\n                />\r\n                <motion.div\r\n                    animate={{\r\n                        x: [0, -80, 0],\r\n                        y: [0, 80, 0],\r\n                        scale: [1.2, 1, 1.2],\r\n                    }}\r\n                    transition={{ duration: 15, repeat: Infinity, ease: \"easeInOut\" }}\r\n                    className=\"login-orb login-orb-cyan\"\r\n                />\r\n                <motion.div\r\n                    animate={{\r\n                        x: [0, 50, 0],\r\n                        y: [0, 100, 0],\r\n                    }}\r\n                    transition={{ duration: 25, repeat: Infinity, ease: \"easeInOut\" }}\r\n                    className=\"login-orb login-orb-emerald\"\r\n                />\r\n\r\n                {/* Grid pattern overlay */}\r\n                <div\r\n                    style={{\r\n                        position: 'absolute',\r\n                        inset: 0,\r\n                        opacity: 0.1,\r\n                        backgroundImage: `radial-gradient(circle at 1px 1px, rgba(255,255,255,0.15) 1px, transparent 0)`,\r\n                        backgroundSize: '40px 40px'\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            {/* Floating particles */}\r\n            <div style={{ position: 'absolute', inset: 0, overflow: 'hidden', pointerEvents: 'none' }}>\r\n                {[10, 25, 40, 55, 70, 85, 15, 35, 60, 80].map((left, i) => (\r\n                    <motion.div\r\n                        key={i}\r\n                        style={{\r\n                            position: 'absolute',\r\n                            width: '4px',\r\n                            height: '4px',\r\n                            background: 'rgba(255, 255, 255, 0.3)',\r\n                            borderRadius: '50%',\r\n                            left: `${left}%`,\r\n                            top: `${(i * 10 + 5) % 100}%`,\r\n                        }}\r\n                        animate={{\r\n                            y: [0, -100, 0],\r\n                            opacity: [0, 1, 0],\r\n                        }}\r\n                        transition={{\r\n                            duration: 5 + (i % 3) * 2,\r\n                            repeat: Infinity,\r\n                            delay: i * 0.5,\r\n                        }}\r\n                    />\r\n                ))}\r\n            </div>\r\n\r\n            {/* Login Card */}\r\n            <motion.div\r\n                initial={{ opacity: 0, y: 20, scale: 0.95 }}\r\n                animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                transition={{ duration: 0.6 }}\r\n                className=\"login-card-wrapper\"\r\n            >\r\n                <div className=\"login-card\">\r\n                    {/* Logo */}\r\n                    <motion.div\r\n                        className=\"login-logo-container\"\r\n                        initial={{ opacity: 0, y: -10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ delay: 0.2 }}\r\n                    >\r\n                        <div style={{ position: 'relative' }}>\r\n                            <div className=\"login-logo-icon\">\r\n                                <TrendingUp style={{ width: '1.75rem', height: '1.75rem', color: 'white' }} />\r\n                            </div>\r\n                            <motion.div\r\n                                animate={{ rotate: 360 }}\r\n                                transition={{ duration: 8, repeat: Infinity, ease: \"linear\" }}\r\n                                style={{ position: 'absolute', inset: '-4px', borderRadius: '0.75rem', border: '1px solid rgba(139, 92, 246, 0.3)' }}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <h1 className=\"login-logo-title\">NorteAcoes</h1>\r\n                            <p className=\"login-logo-subtitle\">Dashboard Fundamentalista</p>\r\n                        </div>\r\n                    </motion.div>\r\n\r\n                    {/* Toggle Login/Register */}\r\n                    <div className=\"login-toggle\">\r\n                        <button\r\n                            onClick={() => setIsLogin(true)}\r\n                            className={`login-toggle-btn ${isLogin ? 'active' : ''}`}\r\n                        >\r\n                            Entrar\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setIsLogin(false)}\r\n                            className={`login-toggle-btn ${!isLogin ? 'active' : ''}`}\r\n                        >\r\n                            Cadastrar\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Error Message */}\r\n                    {(error || validationError) && (\r\n                        <motion.div\r\n                            initial={{ opacity: 0, y: -10 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            className=\"login-error\"\r\n                        >\r\n                            <AlertCircle style={{ width: '1.25rem', height: '1.25rem', color: '#f87171', flexShrink: 0 }} />\r\n                            <p className=\"login-error-text\">{error || validationError}</p>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {/* Success Message */}\r\n                    {successMessage && (\r\n                        <motion.div\r\n                            initial={{ opacity: 0, y: -10 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            className=\"mb-4 p-3 bg-emerald-500/10 border border-emerald-500/20 rounded-lg flex items-center gap-3\"\r\n                        >\r\n                            <Check style={{ width: '1.25rem', height: '1.25rem', color: '#10b981', flexShrink: 0 }} />\r\n                            <p className=\"text-sm text-emerald-200\">{successMessage}</p>\r\n                        </motion.div>\r\n                    )}\r\n\r\n                    {/* Form */}\r\n                    <form onSubmit={handleSubmit} className=\"login-form\">\r\n                        {/* Name field (only for register) */}\r\n                        {!isLogin && (\r\n                            <motion.div\r\n                                initial={{ opacity: 0, height: 0 }}\r\n                                animate={{ opacity: 1, height: 'auto' }}\r\n                                exit={{ opacity: 0, height: 0 }}\r\n                            >\r\n                                <label className=\"login-label\">Nome</label>\r\n                                <div className=\"login-input-wrapper\">\r\n                                    <User className=\"login-input-icon\" />\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        id=\"name\"\r\n                                        name=\"name\"\r\n                                        value={formData.name}\r\n                                        onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                                        placeholder=\"Seu nome\"\r\n                                        className=\"login-input\"\r\n                                    />\r\n                                </div>\r\n                            </motion.div>\r\n                        )}\r\n\r\n                        {/* Email field */}\r\n                        <div>\r\n                            <label className=\"login-label\">Email</label>\r\n                            <div className=\"login-input-wrapper\">\r\n                                <Mail className=\"login-input-icon\" />\r\n                                <input\r\n                                    type=\"email\"\r\n                                    id=\"email\"\r\n                                    name=\"email\"\r\n                                    value={formData.email}\r\n                                    onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n                                    placeholder=\"seu@email.com\"\r\n                                    className=\"login-input\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Password field */}\r\n                        <div>\r\n                            <label className=\"login-label\">Senha</label>\r\n                            <div className=\"login-input-wrapper\">\r\n                                <Lock className=\"login-input-icon\" />\r\n                                <input\r\n                                    type={showPassword ? 'text' : 'password'}\r\n                                    id=\"password\"\r\n                                    name=\"password\"\r\n                                    value={formData.password}\r\n                                    onChange={(e) => setFormData({ ...formData, password: e.target.value })}\r\n                                    placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\r\n                                    className=\"login-input\"\r\n                                    style={{ paddingRight: '3rem' }}\r\n                                    required\r\n                                />\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setShowPassword(!showPassword)}\r\n                                    style={{ position: 'absolute', right: '1rem', top: '50%', transform: 'translateY(-50%)', background: 'none', border: 'none', color: 'rgba(255,255,255,0.3)', cursor: 'pointer' }}\r\n                                >\r\n                                    {showPassword ? <EyeOff style={{ width: '1.25rem', height: '1.25rem' }} /> : <Eye style={{ width: '1.25rem', height: '1.25rem' }} />}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Forgot password */}\r\n                        {isLogin && (\r\n                            <div className=\"login-forgot\">\r\n                                <Link href=\"/forgot-password\" className=\"login-forgot-btn\">\r\n                                    Esqueceu a senha?\r\n                                </Link>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Terms and Conditions Checkbox (Register only) */}\r\n                        {!isLogin && (\r\n                            <motion.div\r\n                                initial={{ opacity: 0 }}\r\n                                animate={{ opacity: 1 }}\r\n                                className=\"flex items-start gap-3 mt-4 mb-2\"\r\n                            >\r\n                                <div className=\"relative flex items-center\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        id=\"terms\"\r\n                                        checked={acceptedTerms}\r\n                                        onChange={(e) => setAcceptedTerms(e.target.checked)}\r\n                                        className=\"peer h-4 w-4 cursor-pointer appearance-none rounded border border-gray-500 bg-white/5 checked:border-purple-500 checked:bg-purple-500 transition-all\"\r\n                                    />\r\n                                    <Check className=\"pointer-events-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 text-white opacity-0 peer-checked:opacity-100 transition-opacity\" />\r\n                                </div>\r\n                                <label htmlFor=\"terms\" className=\"text-xs text-gray-400 cursor-pointer select-none leading-tight\">\r\n                                    Li e concordo com os <a href=\"/terms\" target=\"_blank\" className=\"text-purple-400 hover:text-purple-300 underline underline-offset-2\">Termos de Uso</a> e <a href=\"/privacy\" target=\"_blank\" className=\"text-purple-400 hover:text-purple-300 underline underline-offset-2\">Pol√≠tica de Privacidade</a>.\r\n                                </label>\r\n                            </motion.div>\r\n                        )}\r\n\r\n                        {/* Submit button */}\r\n                        <motion.button\r\n                            type=\"submit\"\r\n                            disabled={loading}\r\n                            whileHover={{ scale: 1.02 }}\r\n                            whileTap={{ scale: 0.98 }}\r\n                            className=\"login-submit\"\r\n                        >\r\n                            {loading ? (\r\n                                <motion.div\r\n                                    animate={{ rotate: 360 }}\r\n                                    transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\r\n                                    style={{ width: '1.25rem', height: '1.25rem', border: '2px solid rgba(255,255,255,0.3)', borderTopColor: 'white', borderRadius: '50%' }}\r\n                                />\r\n                            ) : (\r\n                                <>\r\n                                    <span>{isLogin ? 'Entrar' : 'Criar conta'}</span>\r\n                                    <ArrowRight style={{ width: '1.25rem', height: '1.25rem' }} />\r\n                                </>\r\n                            )}\r\n                        </motion.button>\r\n\r\n                        {/* Resend Confirmation Link (Login Mode Only) */}\r\n                        <div className={`mt-4 text-center ${isLogin ? '' : 'hidden'}`}>\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={async () => {\r\n                                    setValidationError(null);\r\n                                    setSuccessMessage(null);\r\n                                    if (!formData.email) {\r\n                                        setValidationError(\"Preencha o campo de email acima.\");\r\n                                        return;\r\n                                    }\r\n                                    const sent = await resendConfirmation(formData.email);\r\n                                    if (sent) setSuccessMessage(\"Email de confirma√ß√£o reenviado! Verifique sua caixa de entrada.\");\r\n                                }}\r\n                                className=\"text-xs text-gray-500 hover:text-purple-400 transition-colors underline decoration-dotted underline-offset-4\"\r\n                            >\r\n                                N√£o recebeu o email de confirma√ß√£o? Reenviar\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n\r\n                    {/* Divider */}\r\n                    <div className=\"login-divider\">\r\n                        <div className=\"login-divider-line\" />\r\n                        <span className=\"login-divider-text\">ou continue com</span>\r\n                        <div className=\"login-divider-line\" />\r\n                    </div>\r\n\r\n                    {/* Social login */}\r\n                    <div className=\"login-social\">\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={loginWithGoogle}\r\n                            className=\"login-social-btn\"\r\n                            style={{ width: '100%' }}\r\n                        >\r\n                            <svg style={{ width: '1.25rem', height: '1.25rem', flexShrink: 0 }} viewBox=\"0 0 24 24\">\r\n                                <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\" />\r\n                                <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\" />\r\n                                <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\" />\r\n                                <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\" />\r\n                            </svg>\r\n                            Continuar com Google\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Bottom badge */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        transition={{ delay: 0.5 }}\r\n                        className=\"login-footer\"\r\n                    >\r\n                        <Sparkles style={{ width: '0.75rem', height: '0.75rem' }} />\r\n                        <span>An√°lise fundamentalista powered by AI</span>\r\n                    </motion.div>\r\n                </div>\r\n            </motion.div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Info' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":7},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":239,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":239,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8534,8537],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8534,8537],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { createPortal } from 'react-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport axios from 'axios';\nimport {\n  Search,\n  RefreshCw,\n  Sparkles,\n  Trophy,\n  Zap,\n  Info,\n  X,\n  LogOut,\n  User,\n  BarChart3,\n  PieChart,\n  Target,\n  Skull,\n  Lock,\n  FileText\n} from 'lucide-react';\nimport dynamic from 'next/dynamic';\n\nconst AIChat = dynamic(() => import('./components/AIChat'), { ssr: false });\nconst SuggestedPortfolio = dynamic(() => import('./components/SuggestedPortfolio'), { ssr: false });\nconst StockComparisonModal = dynamic(() => import('../components/StockComparisonModal'), { ssr: false });\nconst ToxicStocks = dynamic(() => import('../components/ToxicStocks'), { ssr: false });\n// Keeping StockCard, PremiumFilters, Top3Podium as static imports for LCP optimization (above fold/critical)\nimport StockCard from '../components/StockCard';\nimport PremiumFilters, { FilterValues } from '../components/PremiumFilters';\nimport Top3Podium from '../components/Top3Podium';\nimport { useAuth } from './contexts/AuthContext';\nimport { useRouter } from 'next/navigation';\n\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api';\n\ndeclare global {\n  interface Window {\n    abortController?: AbortController;\n  }\n}\n\ninterface Stock {\n  papel: string;\n  setor?: string;\n  subsetor?: string;\n  cotacao?: number;\n  p_l?: number;\n  p_vp?: number;\n  dividend_yield?: number;\n  roe?: number;\n  roic?: number;\n  liquidez_corrente?: number;\n  score_graham?: number;\n  score_greenblatt?: number;\n  score_bazin?: number;\n  score_qualidade?: number;\n  super_score?: number;\n  margem_liquida?: number;\n  div_bruta_patrimonio?: number;\n  crescimento_receita_5a?: number;\n  liquidez_2meses?: number;\n}\n\ninterface Stats {\n  total_stocks: number;\n  avg_super_score: number;\n  top_stock: string;\n  top_score: number;\n  sectors_count: number;\n}\n\nexport default function Dashboard() {\n  const router = useRouter();\n  const { user, isAuthenticated, loading: authLoading, logout } = useAuth();\n  const [stocks, setStocks] = useState<Stock[]>([]);\n  const [stats, setStats] = useState<Stats | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState('overview');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [minScore] = useState(5);\n  // Legacy Filters (keeping for compatibility)\n  const [onlyBlueChips] = useState(false);\n  const [onlySmallCaps] = useState(false);\n\n  // New Premium Features\n  const [sectors, setSectors] = useState<string[]>([]);\n  const [premiumFilters, setPremiumFilters] = useState<FilterValues | null>(null);\n  const [displayedStocks, setDisplayedStocks] = useState<Stock[]>([]);\n  const [totalStocksCount, setTotalStocksCount] = useState(0);\n\n  const [selectedStock, setSelectedStock] = useState<Stock | null>(null);\n  const [notification, setNotification] = useState<{ type: 'success' | 'error', message: string } | null>(null);\n\n  // Battle Logic\n  const [battleStocks, setBattleStocks] = useState<Stock[]>([]);\n  const [showBattleModal, setShowBattleModal] = useState(false);\n\n  const toggleBattleSelection = (stock: Stock) => {\n    setBattleStocks(prev => {\n      const exists = prev.find(s => s.papel === stock.papel);\n      if (exists) {\n        return prev.filter(s => s.papel !== stock.papel);\n      }\n      if (prev.length >= 2) {\n        return [prev[1], stock]; // Keep max 2, FIFO\n      }\n      return [...prev, stock];\n    });\n  };\n\n  // Fetch sectors on mount\n  useEffect(() => {\n    const fetchSectors = async () => {\n      try {\n        const res = await axios.get(`${API_URL}/sectors`);\n        setSectors(res.data);\n      } catch (error) {\n        console.error('Error fetching sectors:', error);\n      }\n    };\n    fetchSectors();\n  }, []);\n\n  // Removed redundant useEffect. fetchData dependency handles updates.\n\n\n  // Redirect to login if not authenticated\n  useEffect(() => {\n    if (!authLoading && !isAuthenticated) {\n      router.push('/login');\n    }\n  }, [authLoading, isAuthenticated, router]);\n\n  // Calculate displayed stocks based on premium status\n  useEffect(() => {\n    const isPremium = user?.is_premium || false;\n\n    if (isPremium) {\n      // Premium users see all stocks\n      setDisplayedStocks(stocks);\n    } else {\n      // Free users see 3 fixed stocks from ranking 16+ (NOT the top 15)\n      // Selection is FIXED for the entire week, changes every Sunday\n\n      // Get current week number (resets on Sunday)\n      const now = new Date();\n      const startOfYear = new Date(now.getFullYear(), 0, 1);\n      const dayOfYear = Math.floor((now.getTime() - startOfYear.getTime()) / (24 * 60 * 60 * 1000));\n      const weekNumber = Math.floor((dayOfYear + startOfYear.getDay()) / 7);\n\n      // Create a seed from year + week number\n      const seed = now.getFullYear() * 100 + weekNumber;\n\n      // Seeded random function (deterministic based on seed)\n      const seededRandom = (index: number) => {\n        const x = Math.sin(seed + index) * 10000;\n        return x - Math.floor(x);\n      };\n\n      // Get stocks ranked 16-50\n      const belowTop15 = stocks.slice(15, 50);\n\n      if (belowTop15.length >= 3) {\n        // Sort using seeded random (same order every time this week)\n        const shuffled = [...belowTop15]\n          .map((stock, i) => ({ stock, sort: seededRandom(i) }))\n          .sort((a, b) => a.sort - b.sort)\n          .map(item => item.stock);\n\n        setDisplayedStocks(shuffled.slice(0, 3));\n      } else if (belowTop15.length > 0) {\n        setDisplayedStocks(belowTop15);\n      } else {\n        // Fallback if not enough stocks\n        setDisplayedStocks(stocks.slice(0, 3));\n      }\n    }\n    setTotalStocksCount(stocks.length);\n  }, [stocks, user?.is_premium]);\n\n  // Debug: Log removed\n  // useEffect(() => {\n  //   console.log('selectedStock state changed:', selectedStock?.papel || 'null');\n  // }, [selectedStock]);\n\n  const fetchData = useCallback(async () => {\n    // Cancel previous request if exists\n    if (window.abortController) {\n      window.abortController.abort();\n    }\n    const controller = new AbortController();\n    window.abortController = controller;\n\n    setLoading(true);\n    try {\n      // For Anti-Ranking, we want distinct logic\n      const isAntiRanking = activeTab === 'anti-ranking';\n      const isPremium = user?.is_premium || false;\n\n      let endpoint = `${API_URL}/stocks?limit=100`;\n\n      if (isAntiRanking) {\n        // Fetch worst stocks\n        endpoint += `&max_score=15&sort_by=super_score&order=asc`;\n      } else {\n        // Normal fetching with min score\n        endpoint += `&min_score=${minScore}`;\n      }\n\n      // Apply premium filters if set\n      if (premiumFilters && isPremium) {\n        if (premiumFilters.setor) endpoint += `&setor=${encodeURIComponent(premiumFilters.setor)}`;\n        if (premiumFilters.companyType) endpoint += `&company_type=${premiumFilters.companyType}`;\n        if (premiumFilters.minPl) endpoint += `&min_pl=${premiumFilters.minPl}`;\n        if (premiumFilters.maxPl) endpoint += `&max_pl=${premiumFilters.maxPl}`;\n        if (premiumFilters.minPvp) endpoint += `&min_pvp=${premiumFilters.minPvp}`;\n        if (premiumFilters.maxPvp) endpoint += `&max_pvp=${premiumFilters.maxPvp}`;\n        if (premiumFilters.minDy) endpoint += `&min_dy=${premiumFilters.minDy}`;\n        if (premiumFilters.minRoe) endpoint += `&min_roe=${premiumFilters.minRoe}`;\n        if (premiumFilters.minRoic) endpoint += `&min_roic=${premiumFilters.minRoic}`;\n        if (premiumFilters.minGraham) endpoint += `&min_graham=${premiumFilters.minGraham}`;\n        if (premiumFilters.minGreenblatt) endpoint += `&min_greenblatt=${premiumFilters.minGreenblatt}`;\n        if (premiumFilters.minBazin) endpoint += `&min_bazin=${premiumFilters.minBazin}`;\n        if (premiumFilters.minQualidade) endpoint += `&min_qualidade=${premiumFilters.minQualidade}`;\n        if (premiumFilters.minLiquidity) endpoint += `&min_liquidity=${premiumFilters.minLiquidity}`;\n        if (premiumFilters.minMargin) endpoint += `&min_margin=${premiumFilters.minMargin}`;\n        if (premiumFilters.minGrowth) endpoint += `&min_growth=${premiumFilters.minGrowth}`;\n      }\n\n      const [stocksRes, statsRes] = await Promise.all([\n        axios.get(endpoint, { signal: controller.signal }),\n        axios.get(`${API_URL}/stats`, { signal: controller.signal })\n      ]);\n      setStocks(stocksRes.data);\n      setStats(statsRes.data);\n    } catch (error: any) {\n      if (axios.isCancel(error)) {\n        console.log('Request canceled', error.message);\n        return;\n      }\n      console.error('Error fetching data:', error);\n      showNotification('error', 'Erro ao carregar dados da API');\n    } finally {\n      // Only unset loading if this was the last request (controller matches)\n      // Actually, if canceled, we returned early, so this finally block runs still?\n      // Yes, finally runs on return. But we don't want to setLoading(false) if we just started a NEW one.\n      // But since we use a global variable on window (hacky but works for this scope) or ref...\n      // Let's rely on the fact that if it wasn't canceled, it's the latest.\n      if (!controller.signal.aborted) {\n        setLoading(false);\n      }\n      // Note: \"window.abortController\" requires type augmentation.\n      // A better React way is a useRef, but fetchData is defined inside the component so it has access to refs.\n    }\n  }, [activeTab, minScore, user, premiumFilters]);\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  const showNotification = (type: 'success' | 'error', message: string) => {\n    setNotification({ type, message });\n    setTimeout(() => setNotification(null), 3000);\n  };\n\n  // Download Weekly Report PDF (Premium Only)\n  const downloadReport = async () => {\n    if (!user?.is_premium) {\n      showNotification('error', 'üîí Relat√≥rio semanal √© um recurso Premium');\n      router.push('/pricing');\n      return;\n    }\n\n    try {\n      showNotification('success', 'Gerando relat√≥rio...');\n      const token = localStorage.getItem('token');\n      const response = await axios.get(`${API_URL}/reports/weekly`, {\n        headers: { Authorization: `Bearer ${token}` },\n        responseType: 'blob',\n      });\n\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', 'relatorio_semanal.pdf');\n      document.body.appendChild(link);\n      link.click();\n      link.parentNode?.removeChild(link);\n      showNotification('success', 'Relat√≥rio baixado com sucesso!');\n    } catch (error) {\n      console.error('Error downloading report:', error);\n      showNotification('error', 'Erro ao baixar relat√≥rio');\n    }\n  };\n\n  const filteredStocks = stocks.filter(s => {\n    const matchesSearch = s.papel.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      s.setor?.toLowerCase().includes(searchTerm.toLowerCase());\n\n    // Quick proxy for Blue Chip vs Small Cap based on Price (Cotacao) or Liquidity if available\n    // Ideally use 'liquidez_corrente' but let's check if it exists or use price as fallback for MVP demo\n    // Blue Chip: Price > 20 (Mock) OR Liquidity > 10M\n    // Small Cap: Price < 20 (Mock) OR Liquidity < 5M\n    let matchesFilter = true;\n\n    // Use price as simple proxy if liquidity is missing/0\n    const price = s.cotacao || 0;\n\n    if (onlyBlueChips) {\n      matchesFilter = price > 30; // Mock threshold for \"Big\"\n    }\n    if (onlySmallCaps) {\n      matchesFilter = price < 30; // Mock threshold for \"Small\"\n    }\n\n    // Logic: if both selected, they might cancel out or show nothing, so let's enforce radio behavior via UI, \n    // but here we just check sequentially\n\n    return matchesSearch && matchesFilter;\n  });\n\n\n  // Kill List: Removed History, Strategies, and Onboarding for simplified MVP\n\n  const tabs = [\n    { id: 'overview', label: 'Ranking', icon: Zap },\n    { id: 'anti-ranking', label: 'A√ß√µes T√≥xicas', icon: Skull },\n  ];\n\n  // Show loading while checking auth\n\n  // Show loading while checking auth\n  if (authLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-950 via-indigo-950 to-slate-950\">\n        <motion.div\n          animate={{ rotate: 360 }}\n          transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n          className=\"w-8 h-8 border-2 border-cyan-400/30 border-t-cyan-400 rounded-full\"\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen relative\">\n      {/* Animated Background */}\n      <div className=\"bg-mesh\" />\n\n\n      {/* Notification - Using Portal to bypass parent transforms */}\n      {typeof document !== 'undefined' && createPortal(\n        <AnimatePresence>\n          {notification && (\n            <motion.div\n              initial={{ opacity: 0, y: -50 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -50 }}\n              style={{\n                position: 'fixed',\n                top: '1rem',\n                left: '50%',\n                transform: 'translateX(-50%)',\n                zIndex: 99999\n              }}\n              className={`px-6 py-3 rounded-xl flex items-center gap-3 backdrop-blur-md ${notification.type === 'success'\n                ? 'bg-green-500/20 border border-green-500/50 text-green-400'\n                : 'bg-red-500/20 border border-red-500/50 text-red-400'\n                }`}\n            >\n              {notification.type === 'success' ? <Zap className=\"w-5 h-5\" /> : <X className=\"w-5 h-5\" />}\n              {notification.message}\n            </motion.div>\n          )}\n        </AnimatePresence>,\n        document.body\n      )}\n\n      {/* Content */}\n      <div className=\"relative z-10\">\n        {/* Header */}\n        <header className=\"dashboard-header\">\n          <div className=\"dashboard-header-inner\">\n            <div className=\"dashboard-header-content\">\n              <motion.div\n                className=\"dashboard-logo\"\n                initial={{ opacity: 0, x: -20 }}\n                animate={{ opacity: 1, x: 0 }}\n              >\n                <div className=\"dashboard-logo-icon\">\n                  <Sparkles style={{ width: '1.5rem', height: '1.5rem', color: 'white' }} />\n                </div>\n                <div className=\"dashboard-logo-text\">\n                  <h1 className=\"gradient-text\">NorteAcoes</h1>\n                  <p>An√°lise Fundamentalista</p>\n                </div>\n              </motion.div>\n\n              <div className=\"dashboard-actions\">\n                {/* Search */}\n                <div className=\"dashboard-search\">\n                  <Search className=\"dashboard-search-icon\" />\n                  <input\n                    type=\"text\"\n                    placeholder=\"Buscar a√ß√µes ou setores...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"dashboard-search-input\"\n                  />\n                </div>\n\n                <motion.button\n                  onClick={fetchData}\n                  className=\"dashboard-btn-icon\"\n                  disabled={loading}\n                  whileHover={{ scale: 1.05 }}\n                  whileTap={{ scale: 0.95 }}\n                >\n                  <RefreshCw style={{ width: '1.25rem', height: '1.25rem' }} className={loading ? 'animate-spin' : ''} />\n                </motion.button>\n\n                {/* Download Report Button */}\n                <motion.button\n                  onClick={downloadReport}\n                  className={`dashboard-btn-icon ${user?.is_premium ? 'text-purple-400 hover:text-purple-300' : 'text-gray-500'}`}\n                  whileHover={{ scale: 1.05 }}\n                  whileTap={{ scale: 0.95 }}\n                  title={user?.is_premium ? 'Baixar Relat√≥rio Semanal' : 'Relat√≥rio Premium'}\n                >\n                  <FileText style={{ width: '1.25rem', height: '1.25rem' }} />\n                </motion.button>\n\n                {/* User Menu */}\n                {user && (\n                  <div className=\"dashboard-user\">\n                    <div className=\"dashboard-user-info\">\n                      <div className=\"dashboard-user-avatar\">\n                        <User style={{ width: '1rem', height: '1rem', color: 'white' }} />\n                      </div>\n                      <span className=\"dashboard-user-name\">{user.name}</span>\n                    </div>\n                    <motion.button\n                      onClick={logout}\n                      className=\"dashboard-btn-icon dashboard-btn-logout\"\n                      whileHover={{ scale: 1.05 }}\n                      whileTap={{ scale: 0.95 }}\n                      title=\"Sair\"\n                    >\n                      <LogOut style={{ width: '1.25rem', height: '1.25rem' }} />\n                    </motion.button>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </header>\n\n        <div className=\"dashboard-main\">\n          {/* Stats Cards */}\n          <motion.div\n            className=\"dashboard-stats-grid\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.1 }}\n          >\n            <StatCard\n              title=\"Total de A√ß√µes\"\n              value={stats?.total_stocks || 0}\n              icon={BarChart3}\n              gradient=\"from-cyan-400 to-blue-600\"\n              change={filteredStocks.length}\n              changeLabel=\"filtradas\"\n            />\n            <StatCard\n              title=\"Score M√©dio\"\n              value={stats?.avg_super_score?.toFixed(1) || '0'}\n              icon={PieChart}\n              gradient=\"from-purple-400 to-pink-600\"\n            />\n            <StatCard\n              title=\"Top A√ß√£o\"\n              value={stats?.top_stock || 'N/A'}\n              subtitle={`Score: ${stats?.top_score || 0}`}\n              icon={Trophy}\n              gradient=\"from-green-400 to-emerald-600\"\n            />\n            <StatCard\n              title=\"Setores\"\n              value={stats?.sectors_count || 0}\n              icon={Target}\n              gradient=\"from-orange-400 to-red-600\"\n            />\n          </motion.div>\n\n          {/* Tabs */}\n          <div className=\"dashboard-nav\">\n            {tabs.map((tab) => (\n              <motion.button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`dashboard-nav-btn ${activeTab === tab.id ? 'active' : ''}`}\n                whileHover={{ scale: 1.02 }}\n                whileTap={{ scale: 0.98 }}\n              >\n                <tab.icon style={{ width: '1.25rem', height: '1.25rem' }} />\n                {tab.label}\n              </motion.button>\n            ))}\n          </div>\n\n          {/* Tab Content */}\n          <AnimatePresence mode=\"wait\">\n            {/* Overview Tab */}\n            {activeTab === 'overview' && (\n              <motion.div\n                key={activeTab}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: -20 }}\n              >\n                {/* Unified Premium Banner for Free Users */}\n                {user && !user.is_premium && (\n                  <motion.div\n                    initial={{ opacity: 0, y: -10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    className=\"mb-6 p-4 rounded-xl bg-gradient-to-r from-yellow-500/10 via-orange-500/10 to-yellow-500/10 border border-yellow-500/20\"\n                  >\n                    <div className=\"flex items-center justify-between flex-wrap gap-4\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-10 h-10 rounded-full bg-yellow-500/20 flex items-center justify-center\">\n                          <Lock className=\"w-5 h-5 text-yellow-400\" />\n                        </div>\n                        <div>\n                          <p className=\"font-bold text-white\">\n                            Acesso Limitado - {displayedStocks.length} de {totalStocksCount}+ a√ß√µes\n                          </p>\n                          <p className=\"text-sm text-white/60\">\n                            Desbloqueie Top 3, scores completos e filtros avan√ßados\n                          </p>\n                        </div>\n                      </div>\n                      <button\n                        onClick={() => router.push('/pricing')}\n                        className=\"px-5 py-2.5 bg-gradient-to-r from-yellow-400 to-orange-500 text-black font-bold rounded-lg text-sm hover:scale-105 transition-transform shadow-lg shadow-yellow-500/20\"\n                      >\n                        Assinar Agora\n                      </button>\n                    </div>\n                  </motion.div>\n                )}\n\n                {/* Top 3 Podium - Premium Only */}\n                {user?.is_premium && (\n                  <Top3Podium\n                    stocks={stocks}\n                    onSelectStock={setSelectedStock}\n                  />\n                )}\n\n                {/* Filters - Compact */}\n                <PremiumFilters\n                  isPremium={user?.is_premium || false}\n                  sectors={sectors}\n                  onFiltersChange={setPremiumFilters}\n                  onUpgradeClick={() => router.push('/pricing')}\n                />\n\n                {/* Stock Cards Grid */}\n                <div className=\"mb-8\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <h2 className=\"text-lg font-bold text-white\">\n                      {user?.is_premium ? 'Todas as A√ß√µes' : 'Amostra do Ranking'}\n                    </h2>\n                    <span className=\"text-sm text-white/50\">{displayedStocks.length} a√ß√µes</span>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                    {displayedStocks.map((stock, index) => (\n                      <StockCard\n                        key={stock.papel}\n                        stock={stock}\n                        index={index}\n                        isPremium={user?.is_premium || false}\n                        onClick={setSelectedStock}\n                        isSelected={!!battleStocks.find(s => s.papel === stock.papel)}\n                        onToggleSelect={toggleBattleSelection}\n                      />\n                    ))}\n                  </div>\n\n                  {/* Simple message below cards for free users */}\n                  {user && !user.is_premium && displayedStocks.length > 0 && (\n                    <div className=\"mt-6 text-center\">\n                      <p className=\"text-white/40 text-sm\">\n                        Mostrando {displayedStocks.length} a√ß√µes do ranking ‚Ä¢\n                        <span\n                          className=\"text-yellow-400 hover:underline cursor-pointer ml-1\"\n                          onClick={() => router.push('/pricing')}\n                        >\n                          Ver todas as {totalStocksCount}+ a√ß√µes ‚Üí\n                        </span>\n                      </p>\n                    </div>\n                  )}\n\n                  {displayedStocks.length === 0 && (\n                    <div className=\"text-center py-12 text-white/40\">\n                      Nenhuma a√ß√£o encontrada com os filtros atuais.\n                    </div>\n                  )}\n                </div>\n              </motion.div>\n            )}\n\n            {/* Anti-Ranking Tab - Toxic Stocks */}\n            {activeTab === 'anti-ranking' && (\n              <motion.div\n                key=\"anti-ranking\"\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: -20 }}\n              >\n                <ToxicStocks\n                  stocks={stocks\n                    .filter(s =>\n                      (s.super_score !== undefined && s.super_score < 10) ||\n                      (s.p_l !== undefined && s.p_l < 0) ||\n                      (s.roe !== undefined && s.roe < 0) ||\n                      (s.div_bruta_patrimonio !== undefined && s.div_bruta_patrimonio > 2)\n                    )\n                    .sort((a, b) => (a.super_score || 0) - (b.super_score || 0))\n                  }\n                  isPremium={user?.is_premium || false}\n                  onSelectStock={setSelectedStock}\n                />\n              </motion.div>\n            )}\n\n\n          </AnimatePresence>\n        </div >\n      </div >\n\n\n      {selectedStock && typeof document !== 'undefined' && createPortal(\n        <StockModal stock={selectedStock} onClose={() => setSelectedStock(null)} isPremium={user?.is_premium || false} />,\n        document.body\n      )\n      }\n      {\n        notification && typeof document !== 'undefined' && createPortal(\n          <div\n            style={{\n              position: 'fixed',\n              bottom: '2rem',\n              right: '2rem',\n              padding: '1rem 1.5rem',\n              borderRadius: '0.75rem',\n              backgroundColor: notification.type === 'success' ? 'rgba(34, 197, 94, 0.95)' : 'rgba(239, 68, 68, 0.95)',\n              color: 'white',\n              fontWeight: 500,\n              boxShadow: '0 10px 40px rgba(0, 0, 0, 0.3)',\n              zIndex: 99999,\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              animation: 'slideInUp 0.3s ease-out'\n            }}\n          >\n            {notification.type === 'success' ? (\n              <Sparkles style={{ width: '1.25rem', height: '1.25rem' }} />\n            ) : (\n              <X style={{ width: '1.25rem', height: '1.25rem' }} />\n            )}\n            {notification.message}\n          </div>,\n          document.body\n        )\n      }\n\n      {/* AI Chat Floating Button */}\n      <AIChat />\n\n      {/* Suggested Portfolio Floating Button */}\n      <SuggestedPortfolio />\n\n      {/* Floating Battle Button */}\n      {\n        battleStocks.length > 0 && (\n          <div className=\"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 flex items-center gap-4 bg-slate-900/90 backdrop-blur-md p-2 pl-6 pr-2 rounded-full border border-yellow-500/30 shadow-2xl shadow-yellow-500/10 animate-in slide-in-from-bottom-10 fade-in duration-300\">\n            <div className=\"flex -space-x-2\">\n              {battleStocks.map(s => (\n                <div key={s.papel} className=\"w-8 h-8 rounded-full bg-slate-800 border-2 border-slate-900 flex items-center justify-center text-[10px] font-bold text-white\">\n                  {s.papel.substring(0, 4)}\n                </div>\n              ))}\n              {battleStocks.length < 2 && (\n                <div className=\"w-8 h-8 rounded-full bg-slate-800/50 border-2 border-slate-900 border-dashed flex items-center justify-center text-[10px] text-white/20\">\n                  ?\n                </div>\n              )}\n            </div>\n\n            <div className=\"text-xs text-white/50\">\n              <strong className=\"text-white\">{battleStocks.length}</strong>/2 Selecionadas\n            </div>\n\n            <button\n              disabled={battleStocks.length < 2}\n              onClick={() => setShowBattleModal(true)}\n              className={`px-4 py-2 rounded-full font-bold text-xs flex items-center gap-2 transition-all ${battleStocks.length === 2 ? 'bg-yellow-400 text-slate-900 hover:scale-105 shadow-lg shadow-yellow-400/20' : 'bg-white/10 text-white/30 cursor-not-allowed'}`}\n            >\n              <Zap className=\"w-3 h-3 fill-current\" />\n              BATALHAR\n            </button>\n\n            {battleStocks.length > 0 && (\n              <button\n                onClick={() => setBattleStocks([])}\n                className=\"w-8 h-8 rounded-full hover:bg-white/10 flex items-center justify-center text-white/30 hover:text-white transition-colors\"\n              >\n                <X className=\"w-4 h-4\" />\n              </button>\n            )}\n          </div>\n        )\n      }\n\n      {\n        showBattleModal && battleStocks.length === 2 && (\n          <StockComparisonModal\n            stockA={battleStocks[0]}\n            stockB={battleStocks[1]}\n            onClose={() => setShowBattleModal(false)}\n          />\n        )\n      }\n\n    </div >\n  );\n}\n\n// ============================================\n// COMPONENTS\n// ============================================\n\nfunction StatCard({\n  title,\n  value,\n  subtitle,\n  icon: Icon,\n  gradient,\n  change,\n  changeLabel\n}: {\n  title: string;\n  value: string | number;\n  subtitle?: string;\n  icon: React.ElementType;\n  gradient: string;\n  change?: number;\n  changeLabel?: string;\n}) {\n  return (\n    <motion.div\n      className=\"card card-glow relative overflow-hidden group\"\n      whileHover={{ scale: 1.02 }}\n      transition={{ type: 'spring', stiffness: 300 }}\n    >\n      <div className={`absolute inset-0 bg-gradient-to-br ${gradient} opacity-0 group-hover:opacity-5 transition-opacity`} />\n\n      <div className=\"flex items-start justify-between\">\n        <div>\n          <p className=\"text-white/50 text-sm mb-2\">{title}</p>\n          <p className=\"stat-value gradient-text\">{value}</p>\n          {subtitle && <p className=\"text-white/40 text-sm mt-1\">{subtitle}</p>}\n          {change !== undefined && (\n            <p className=\"text-cyan-400 text-sm mt-1\">{change} {changeLabel}</p>\n          )}\n        </div>\n        <div className={`w-12 h-12 rounded-2xl bg-gradient-to-br ${gradient} flex items-center justify-center opacity-80`}>\n          <Icon className=\"w-6 h-6 text-white\" />\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n\n\nfunction StockModal({ stock, onClose, isPremium }: { stock: Stock, onClose: () => void, isPremium: boolean }) {\n  const getScoreColor = (score: number) => {\n    if (score >= 12) return 'text-green-400';\n    if (score >= 8) return 'text-yellow-400';\n    return 'text-red-400';\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      className=\"fixed inset-0 bg-black/80 backdrop-blur-md z-[200] flex items-center justify-center p-4\"\n      onClick={onClose}\n    >\n      <motion.div\n        initial={{ scale: 0.9, y: 20 }}\n        animate={{ scale: 1, y: 0 }}\n        exit={{ scale: 0.9, y: 20 }}\n        className=\"card max-w-lg w-full max-h-[90vh] overflow-y-auto\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <h2 className=\"text-2xl font-bold gradient-text\">{stock.papel}</h2>\n            <p className=\"text-white/50\">{stock.setor || 'Sem setor'}</p>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        {/* Basic Metrics - Always Visible */}\n        <div className=\"grid grid-cols-2 gap-4 mb-6\">\n          <div className=\"bg-white/5 rounded-xl p-4\">\n            <p className=\"text-white/40 text-sm mb-1\">Cota√ß√£o</p>\n            <p className=\"text-xl font-bold\">R$ {stock.cotacao?.toFixed(2)}</p>\n          </div>\n          <div className=\"bg-white/5 rounded-xl p-4\">\n            <p className=\"text-white/40 text-sm mb-1\">Super Score</p>\n            <p className={`text-xl font-bold ${getScoreColor(stock.super_score || 0)}`}>\n              {stock.super_score?.toFixed(2)}\n            </p>\n          </div>\n        </div>\n\n        {/* Basic Indicators - Visible */}\n        <div className=\"space-y-3\">\n          <h3 className=\"font-semibold mb-2\">Indicadores B√°sicos</h3>\n          <div className=\"grid grid-cols-3 gap-3\">\n            <div className=\"bg-white/5 rounded-lg p-3 text-center\">\n              <p className=\"text-white/40 text-xs\">P/L</p>\n              <p className=\"font-bold\">{stock.p_l?.toFixed(2)}</p>\n            </div>\n            <div className=\"bg-white/5 rounded-lg p-3 text-center\">\n              <p className=\"text-white/40 text-xs\">P/VP</p>\n              <p className=\"font-bold\">{stock.p_vp?.toFixed(2)}</p>\n            </div>\n            <div className=\"bg-white/5 rounded-lg p-3 text-center\">\n              <p className=\"text-white/40 text-xs\">DY</p>\n              <p className=\"font-bold\">{stock.dividend_yield?.toFixed(2)}%</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Advanced Metrics - Premium Only */}\n        <div className=\"mt-6 pt-6 border-t border-white/10 relative\">\n          <h3 className=\"font-semibold mb-3 flex items-center gap-2\">\n            Indicadores Avan√ßados\n            {!isPremium && (\n              <span className=\"text-xs bg-yellow-500/20 text-yellow-400 px-2 py-0.5 rounded-full flex items-center gap-1\">\n                <Lock className=\"w-3 h-3\" /> Premium\n              </span>\n            )}\n          </h3>\n\n          {isPremium ? (\n            <div className=\"grid grid-cols-3 gap-3\">\n              <div className=\"bg-white/5 rounded-lg p-3 text-center\">\n                <p className=\"text-white/40 text-xs\">ROE</p>\n                <p className=\"font-bold\">{stock.roe?.toFixed(2)}%</p>\n              </div>\n              <div className=\"bg-white/5 rounded-lg p-3 text-center\">\n                <p className=\"text-white/40 text-xs\">ROIC</p>\n                <p className=\"font-bold\">{stock.roic?.toFixed(2)}%</p>\n              </div>\n              <div className=\"bg-white/5 rounded-lg p-3 text-center\">\n                <p className=\"text-white/40 text-xs\">Liq. Corr.</p>\n                <p className=\"font-bold\">{stock.liquidez_corrente?.toFixed(2)}</p>\n              </div>\n            </div>\n          ) : (\n            <div className=\"relative\">\n              <div className=\"grid grid-cols-3 gap-3 blur-sm pointer-events-none\">\n                <div className=\"bg-white/5 rounded-lg p-3 text-center\">\n                  <p className=\"text-white/40 text-xs\">ROE</p>\n                  <p className=\"font-bold\">??%</p>\n                </div>\n                <div className=\"bg-white/5 rounded-lg p-3 text-center\">\n                  <p className=\"text-white/40 text-xs\">ROIC</p>\n                  <p className=\"font-bold\">??%</p>\n                </div>\n                <div className=\"bg-white/5 rounded-lg p-3 text-center\">\n                  <p className=\"text-white/40 text-xs\">Liq. Corr.</p>\n                  <p className=\"font-bold\">??</p>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Strategy Scores - Premium Only */}\n        <div className=\"mt-6 pt-6 border-t border-white/10\">\n          <h3 className=\"font-semibold mb-3 flex items-center gap-2\">\n            Scores por Estrat√©gia\n            {!isPremium && (\n              <span className=\"text-xs bg-yellow-500/20 text-yellow-400 px-2 py-0.5 rounded-full flex items-center gap-1\">\n                <Lock className=\"w-3 h-3\" /> Premium\n              </span>\n            )}\n          </h3>\n\n          {isPremium ? (\n            <div className=\"grid grid-cols-4 gap-2\">\n              <div className=\"text-center\">\n                <p className=\"text-xs text-white/40\">Graham</p>\n                <p className={`font-bold ${getScoreColor(stock.score_graham || 0)}`}>\n                  {stock.score_graham?.toFixed(1)}\n                </p>\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-xs text-white/40\">Greenblatt</p>\n                <p className={`font-bold ${getScoreColor(stock.score_greenblatt || 0)}`}>\n                  {stock.score_greenblatt?.toFixed(1)}\n                </p>\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-xs text-white/40\">Bazin</p>\n                <p className={`font-bold ${getScoreColor(stock.score_bazin || 0)}`}>\n                  {stock.score_bazin?.toFixed(1)}\n                </p>\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-xs text-white/40\">Qualidade</p>\n                <p className={`font-bold ${getScoreColor(stock.score_qualidade || 0)}`}>\n                  {stock.score_qualidade?.toFixed(1)}\n                </p>\n              </div>\n            </div>\n          ) : (\n            <div className=\"relative\">\n              <div className=\"grid grid-cols-4 gap-2 blur-sm pointer-events-none\">\n                <div className=\"text-center\">\n                  <p className=\"text-xs text-white/40\">Graham</p>\n                  <p className=\"font-bold text-white/50\">?</p>\n                </div>\n                <div className=\"text-center\">\n                  <p className=\"text-xs text-white/40\">Greenblatt</p>\n                  <p className=\"font-bold text-white/50\">?</p>\n                </div>\n                <div className=\"text-center\">\n                  <p className=\"text-xs text-white/40\">Bazin</p>\n                  <p className=\"font-bold text-white/50\">?</p>\n                </div>\n                <div className=\"text-center\">\n                  <p className=\"text-xs text-white/40\">Qualidade</p>\n                  <p className=\"font-bold text-white/50\">?</p>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Upgrade CTA for Free Users */}\n        {!isPremium && (\n          <div className=\"mt-6 p-4 rounded-xl bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-500/30\">\n            <div className=\"flex items-center gap-3\">\n              <Sparkles className=\"w-6 h-6 text-yellow-400\" />\n              <div className=\"flex-1\">\n                <p className=\"font-bold text-white\">Desbloquear An√°lise Completa</p>\n                <p className=\"text-sm text-white/60\">ROE, ROIC, Scores por Estrat√©gia e mais</p>\n              </div>\n              <button className=\"px-4 py-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-black font-bold rounded-lg text-sm hover:scale-105 transition-transform\">\n                Assinar\n              </button>\n            </div>\n          </div>\n        )}\n      </motion.div>\n    </motion.div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\payment\\cancel\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\payment\\success\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\pricing\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'HelpCircle' is defined but never used.","line":5,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":56}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Check, X, Zap, Crown, Shield, Star, HelpCircle, ChevronDown } from 'lucide-react';\r\nimport axios from 'axios';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api';\r\n\r\nexport default function PricingPage() {\r\n    const { user } = useAuth();\r\n    const router = useRouter();\r\n    const [isLoadingCheckout, setIsLoadingCheckout] = useState(false);\r\n    const [isPortalLoading, setIsPortalLoading] = useState(false);\r\n    const [openFaq, setOpenFaq] = useState<number | null>(null);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const handleSubscribe = async () => {\r\n        if (!user) {\r\n            router.push('/login');\r\n            return;\r\n        }\r\n\r\n        setIsLoadingCheckout(true);\r\n        setError(null);\r\n        try {\r\n            const { data } = await axios.post(`${API_URL}/payments/checkout`, {\r\n                return_url: window.location.origin\r\n            }, {\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem('token')}`\r\n                }\r\n            });\r\n            window.location.href = data.url;\r\n        } catch (error) {\r\n            console.error('Error creating checkout session:', error);\r\n            setError('Erro ao iniciar pagamento. Tente novamente mais tarde.');\r\n            setIsLoadingCheckout(false);\r\n        }\r\n    };\r\n\r\n    const handlePortal = async () => {\r\n        if (!user) return;\r\n        setIsPortalLoading(true);\r\n        setError(null);\r\n        try {\r\n            const { data } = await axios.post(`${API_URL}/payments/portal`, {\r\n                return_url: window.location.href\r\n            }, {\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem('token')}`\r\n                }\r\n            });\r\n            window.location.href = data.url;\r\n        } catch (error) {\r\n            console.error('Error accessing portal:', error);\r\n            setError('Erro ao acessar gerenciamento de assinatura.');\r\n            setIsPortalLoading(false);\r\n        }\r\n    };\r\n\r\n    const features = [\r\n        { name: \"An√°lise de A√ß√µes\", free: true, premium: true },\r\n        { name: \"Ranking Bazin/Graham\", free: true, premium: true },\r\n        { name: \"Batalha de A√ß√µes (Comparador)\", free: true, premium: true },\r\n        { name: \"Scores Avan√ßados (Qualidade)\", free: false, premium: true },\r\n        { name: \"Relat√≥rios PDF Completos\", free: false, premium: true },\r\n        { name: \"Recomenda√ß√£o IA (Buy/Hold/Sell)\", free: false, premium: true },\r\n        { name: \"Calend√°rio de Dividendos\", free: false, premium: true },\r\n        { name: \"Sem An√∫ncios / Foco Total\", free: false, premium: true },\r\n        { name: \"Suporte Priorit√°rio\", free: false, premium: true },\r\n    ];\r\n\r\n    const faqs = [\r\n        { q: \"O pagamento √© seguro?\", a: \"Sim! Usamos o Stripe, a mesma plataforma de pagamentos da Amazon e Google. Seus dados nunca passam pelos nossos servidores.\" },\r\n        { q: \"Posso cancelar quando quiser?\", a: \"Com certeza. Sem letras mi√∫das. Voc√™ cancela com 1 clique no seu perfil e o acesso continua at√© o fim do m√™s pago.\" },\r\n        { q: \"Tenho garantia?\", a: \"Sim. Se voc√™ n√£o gostar nos primeiros 7 dias, devolvemos 100% do seu dinheiro. Sem perguntas.\" },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#0B0C15] text-white selection:bg-purple-500/30 overflow-x-hidden flex flex-col items-center\">\r\n\r\n            {/* Background Glows */}\r\n            <div className=\"fixed inset-0 overflow-hidden pointer-events-none z-0\">\r\n                <div className=\"absolute top-[-10%] left-1/2 -translate-x-1/2 w-[1000px] h-[1000px] bg-purple-600/10 rounded-full blur-[120px]\" />\r\n                <div className=\"absolute top-[20%] left-1/2 -translate-x-1/2 w-[800px] h-[800px] bg-blue-600/5 rounded-full blur-[100px]\" />\r\n            </div>\r\n\r\n            <div className=\"relative font-sans w-full max-w-7xl mx-auto px-6 py-20 md:py-32 z-10 flex flex-col items-center gap-24\">\r\n\r\n                {/* Error Banner */}\r\n                {error && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, y: -20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        className=\"w-full max-w-md bg-red-500/10 border border-red-500/20 text-red-200 px-6 py-4 rounded-xl flex items-center justify-center gap-3 z-20\"\r\n                    >\r\n                        <Shield className=\"w-5 h-5 text-red-400\" />\r\n                        <span className=\"font-medium\">{error}</span>\r\n                    </motion.div>\r\n                )}\r\n\r\n                {/* Header Section */}\r\n                <div className=\"text-center space-y-6 max-w-4xl mx-auto flex flex-col items-center\">\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.9 }}\r\n                        animate={{ opacity: 1, scale: 1 }}\r\n                        className=\"inline-flex items-center gap-2 px-5 py-2.5 rounded-full bg-gradient-to-r from-purple-500/10 to-blue-500/10 border border-purple-500/20 text-sm font-semibold text-purple-300 backdrop-blur-md shadow-lg shadow-purple-900/10\"\r\n                    >\r\n                        <Star className=\"w-4 h-4 fill-purple-300 text-purple-300\" />\r\n                        <span className=\"tracking-wide uppercase text-xs font-bold\">Acesso Premium Dispon√≠vel</span>\r\n                    </motion.div>\r\n\r\n                    <motion.h1\r\n                        initial={{ opacity: 0, y: 30 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ delay: 0.1 }}\r\n                        className=\"text-4xl md:text-6xl lg:text-7xl font-black tracking-tight text-center leading-[1.1]\"\r\n                    >\r\n                        <span className=\"bg-gradient-to-b from-white via-gray-100 to-gray-500 bg-clip-text text-transparent\">Investimentos de</span><br />\r\n                        <span className=\"bg-gradient-to-r from-purple-400 via-pink-400 to-amber-300 bg-clip-text text-transparent filter drop-shadow-2xl\">Elite Mundial</span>\r\n                    </motion.h1>\r\n\r\n                    <motion.p\r\n                        initial={{ opacity: 0, y: 20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ delay: 0.2 }}\r\n                        className=\"text-lg md:text-xl text-gray-400/80 max-w-2xl text-center leading-relaxed font-light\"\r\n                    >\r\n                        Ferramentas profissionais de <strong>Graham & Bazin</strong>, IA preditiva e dados da B3 para quem joga para ganhar.\r\n                    </motion.p>\r\n                </div>\r\n\r\n                {/* Pricing Cards Container - GRID Layout with Delayed Breakpoint */}\r\n                {/* Switch to grid-cols-2 ONLY on LG screens (1024px+). Tablets get full width stack. */}\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 w-full max-w-5xl mx-auto items-stretch\">\r\n\r\n                    {/* Basic Plan */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0, y: 20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ delay: 0.4 }}\r\n                        className=\"flex flex-col h-full bg-[#12131e]/60 backdrop-blur-xl rounded-3xl border border-white/5 p-10 hover:bg-[#12131e]/80 transition-colors duration-300\"\r\n                    >\r\n                        <div className=\"mb-8\">\r\n                            <h3 className=\"text-xl font-bold text-gray-300 mb-2\">Iniciante</h3>\r\n                            <div className=\"flex items-baseline gap-1\">\r\n                                <span className=\"text-4xl lg:text-5xl font-bold text-white tracking-tight\">R$ 0</span>\r\n                                <span className=\"text-gray-500 text-lg font-medium\">/m√™s</span>\r\n                            </div>\r\n                            <p className=\"mt-4 text-gray-400 text-sm lg:text-base leading-relaxed\">\r\n                                Funcionalidades essenciais para quem est√° come√ßando a organizar a carteira de investimentos.\r\n                            </p>\r\n                        </div>\r\n\r\n                        <button\r\n                            disabled\r\n                            className=\"w-full py-4 rounded-xl font-bold bg-white/5 text-gray-500 border border-white/5 uppercase text-xs tracking-widest cursor-not-allowed mb-8 transition-colors hover:bg-white/10\"\r\n                        >\r\n                            Seu Plano Atual\r\n                        </button>\r\n\r\n                        <div className=\"space-y-4 flex-1\">\r\n                            <p className=\"text-[10px] font-bold text-gray-500 uppercase tracking-[0.2em] mb-4\">Incluso no plano</p>\r\n                            {features.map((feature, i) => (\r\n                                <div key={i} className=\"flex items-start gap-3.5 group\">\r\n                                    {feature.free ? (\r\n                                        <div className=\"p-0.5 rounded-full bg-white/5 shrink-0 mt-0.5 group-hover:bg-white/10 transition-colors\">\r\n                                            <Check className=\"w-4 h-4 text-gray-300\" />\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className=\"p-0.5 shrink-0 mt-0.5 opacity-20\">\r\n                                            <X className=\"w-4 h-4 text-gray-500\" />\r\n                                        </div>\r\n                                    )}\r\n                                    <span className={`${feature.free ? 'text-gray-300' : 'text-gray-600 line-through decoration-gray-700/50'} text-sm leading-6`}>\r\n                                        {feature.name}\r\n                                    </span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </motion.div>\r\n\r\n                    {/* Pro Plan - Highlights */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0, y: 20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ delay: 0.5 }}\r\n                        className=\"relative group flex flex-col h-full\"\r\n                    >\r\n                        {/* Glowing Border Effect */}\r\n                        <div className=\"absolute -inset-[2px] bg-gradient-to-b from-purple-500 via-pink-500 to-orange-500 rounded-[28px] blur-[15px] opacity-40 group-hover:opacity-75 transition duration-700 animate-pulse-slow\"></div>\r\n\r\n                        <div className=\"relative flex-1 bg-[#161726] rounded-3xl border border-white/10 p-10 flex flex-col overflow-hidden shadow-2xl\">\r\n\r\n                            {/* Recommended Badge - Header Integration */}\r\n                            <div className=\"flex flex-wrap items-start justify-between gap-y-4 mb-6\">\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <span className=\"p-2 rounded-lg bg-gradient-to-br from-amber-500/20 to-orange-500/20 border border-amber-500/30\">\r\n                                        <Zap className=\"w-5 h-5 text-amber-400 fill-amber-400\" />\r\n                                    </span>\r\n                                    <h3 className=\"text-xl font-bold text-white\">Investidor Pro</h3>\r\n                                </div>\r\n                                <span className=\"px-3 py-1 bg-gradient-to-r from-amber-400 to-orange-500 text-black text-[10px] font-black uppercase tracking-wider rounded-full shadow-lg shadow-amber-500/20\">\r\n                                    Recomendado\r\n                                </span>\r\n                            </div>\r\n\r\n                            <div className=\"mb-8\">\r\n                                <div className=\"flex items-baseline gap-1\">\r\n                                    <span className=\"text-5xl lg:text-6xl font-black text-white tracking-tighter\">R$ 29,90</span>\r\n                                    <span className=\"text-gray-400 text-lg font-medium\">/m√™s</span>\r\n                                </div>\r\n                                <p className=\"mt-4 text-purple-200/80 text-sm lg:text-base leading-relaxed\">\r\n                                    Desbloqueie todo o potencial da plataforma. Acesso sem limites a rankings, IA e relat√≥rios.\r\n                                </p>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={user?.is_premium ? handlePortal : handleSubscribe}\r\n                                disabled={isLoadingCheckout || isPortalLoading}\r\n                                className={`w-full py-4 rounded-xl font-black text-sm uppercase tracking-widest transition-all transform hover:scale-[1.02] shadow-xl mb-8 group/btn flex items-center justify-center gap-2 relative overflow-hidden ${user?.is_premium\r\n                                    ? 'bg-emerald-600 hover:bg-emerald-500 text-white shadow-emerald-500/40'\r\n                                    : 'bg-gradient-to-r from-purple-600 via-pink-600 to-orange-600 hover:from-purple-500 hover:to-orange-500 text-white shadow-purple-500/40'\r\n                                    }`}\r\n                            >\r\n                                <span className=\"relative z-10\">\r\n                                    {isLoadingCheckout ? 'Processando...' :\r\n                                        isPortalLoading ? 'Abrindo Portal...' :\r\n                                            user?.is_premium ? 'Gerenciar Assinatura' : 'Quero Ser Pro'}\r\n                                </span>\r\n                                {(!isLoadingCheckout && !isPortalLoading && !user?.is_premium) && <Crown className=\"w-4 h-4 relative z-10 mb-0.5\" />}\r\n                                {(user?.is_premium && !isPortalLoading) && <Zap className=\"w-4 h-4 relative z-10 mb-0.5\" />}\r\n                            </button>\r\n\r\n                            <div className=\"space-y-4 flex-1\">\r\n                                <p className=\"text-[10px] font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400 uppercase tracking-[0.2em] mb-4\">Tudo do b√°sico +</p>\r\n                                {features.map((feature, i) => (\r\n                                    <div key={i} className=\"flex items-start gap-3.5\">\r\n                                        {feature.premium ? (\r\n                                            <div className=\"p-0.5 rounded-full bg-green-500/10 shrink-0 mt-0.5 border border-green-500/20\">\r\n                                                <Check className=\"w-4 h-4 text-green-400 stroke-[3]\" />\r\n                                            </div>\r\n                                        ) : (\r\n                                            <div className=\"p-0.5 shrink-0 mt-0.5 opacity-20\">\r\n                                                <X className=\"w-4 h-4 text-gray-600\" />\r\n                                            </div>\r\n                                        )}\r\n                                        <span className={`${feature.premium ? 'text-white font-medium' : 'text-gray-600'} text-sm leading-6`}>\r\n                                            {feature.name}\r\n                                        </span>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            <div className=\"mt-8 pt-5 border-t border-dashed border-white/10 flex items-center justify-center gap-2 text-[10px] text-green-400/80 font-mono tracking-widest uppercase\">\r\n                                <Shield className=\"w-3 h-3\" />\r\n                                Garantia de 7 dias\r\n                            </div>\r\n                        </div>\r\n                    </motion.div>\r\n                </div>\r\n\r\n                {/* FAQ Section */}\r\n                <div className=\"w-full max-w-4xl pt-24 border-t border-white/5\">\r\n                    <h2 className=\"text-3xl font-bold text-center mb-16\">\r\n                        <span className=\"bg-gradient-to-r from-white to-gray-400 bg-clip-text text-transparent\">D√∫vidas Frequentes</span>\r\n                    </h2>\r\n                    <div className=\"grid gap-4\">\r\n                        {faqs.map((faq, i) => (\r\n                            <div key={i} className=\"group bg-[#12131e] rounded-2xl border border-white/5 overflow-hidden transition-all duration-300 hover:border-purple-500/30\">\r\n                                <button\r\n                                    onClick={() => setOpenFaq(openFaq === i ? null : i)}\r\n                                    className=\"w-full flex items-center justify-between p-6 text-left\"\r\n                                >\r\n                                    <span className=\"font-semibold text-gray-200 text-base md:text-lg group-hover:text-purple-300 transition-colors\">{faq.q}</span>\r\n                                    <ChevronDown className={`w-5 h-5 text-gray-500 group-hover:text-purple-400 transition-transform duration-300 ${openFaq === i ? 'rotate-180' : ''}`} />\r\n                                </button>\r\n                                {openFaq === i && (\r\n                                    <div className=\"px-6 pb-6 text-gray-400 text-sm md:text-base leading-relaxed animate-in slide-in-from-top-2 border-t border-white/5 pt-4\">\r\n                                        {faq.a}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Footer Brand */}\r\n                <div className=\"pb-12 pt-12 text-center opacity-30\">\r\n                    <p className=\"text-sm tracking-[0.2em] uppercase font-bold text-gray-500\">NorteAcoes App ¬© 2025</p>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\privacy\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\providers.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\robots.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\sitemap.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\terms\\page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":22,"column":72,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1007,1281],"text":"\r\n                            Ao acessar e usar a plataforma NorteAcoes (&quot;Servi√ßo\"), voc√™ concorda em cumprir estes Termos de Uso e todas as leis aplic√°veis. Se voc√™ n√£o concordar com algum destes termos, est√° proibido de usar ou acessar este site.\r\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1007,1281],"text":"\r\n                            Ao acessar e usar a plataforma NorteAcoes (&ldquo;Servi√ßo\"), voc√™ concorda em cumprir estes Termos de Uso e todas as leis aplic√°veis. Se voc√™ n√£o concordar com algum destes termos, est√° proibido de usar ou acessar este site.\r\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1007,1281],"text":"\r\n                            Ao acessar e usar a plataforma NorteAcoes (&#34;Servi√ßo\"), voc√™ concorda em cumprir estes Termos de Uso e todas as leis aplic√°veis. Se voc√™ n√£o concordar com algum destes termos, est√° proibido de usar ou acessar este site.\r\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1007,1281],"text":"\r\n                            Ao acessar e usar a plataforma NorteAcoes (&rdquo;Servi√ßo\"), voc√™ concorda em cumprir estes Termos de Uso e todas as leis aplic√°veis. Se voc√™ n√£o concordar com algum destes termos, est√° proibido de usar ou acessar este site.\r\n                        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":22,"column":80,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1007,1281],"text":"\r\n                            Ao acessar e usar a plataforma NorteAcoes (\"Servi√ßo&quot;), voc√™ concorda em cumprir estes Termos de Uso e todas as leis aplic√°veis. Se voc√™ n√£o concordar com algum destes termos, est√° proibido de usar ou acessar este site.\r\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1007,1281],"text":"\r\n                            Ao acessar e usar a plataforma NorteAcoes (\"Servi√ßo&ldquo;), voc√™ concorda em cumprir estes Termos de Uso e todas as leis aplic√°veis. Se voc√™ n√£o concordar com algum destes termos, est√° proibido de usar ou acessar este site.\r\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1007,1281],"text":"\r\n                            Ao acessar e usar a plataforma NorteAcoes (\"Servi√ßo&#34;), voc√™ concorda em cumprir estes Termos de Uso e todas as leis aplic√°veis. Se voc√™ n√£o concordar com algum destes termos, est√° proibido de usar ou acessar este site.\r\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1007,1281],"text":"\r\n                            Ao acessar e usar a plataforma NorteAcoes (\"Servi√ßo&rdquo;), voc√™ concorda em cumprir estes Termos de Uso e todas as leis aplic√°veis. Se voc√™ n√£o concordar com algum destes termos, est√° proibido de usar ou acessar este site.\r\n                        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":42,"column":79,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2590,2981],"text":"\r\n                            Os materiais no site da NorteAcoes s√£o fornecidos &quot;como est√£o\". NorteAcoes n√£o oferece garantias, expressas ou impl√≠citas, e, por este meio, isenta e nega todas as outras garantias, incluindo, sem limita√ß√£o, garantias impl√≠citas ou condi√ß√µes de comercializa√ß√£o, adequa√ß√£o a um fim espec√≠fico ou n√£o viola√ß√£o de propriedade intelectual.\r\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2590,2981],"text":"\r\n                            Os materiais no site da NorteAcoes s√£o fornecidos &ldquo;como est√£o\". NorteAcoes n√£o oferece garantias, expressas ou impl√≠citas, e, por este meio, isenta e nega todas as outras garantias, incluindo, sem limita√ß√£o, garantias impl√≠citas ou condi√ß√µes de comercializa√ß√£o, adequa√ß√£o a um fim espec√≠fico ou n√£o viola√ß√£o de propriedade intelectual.\r\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2590,2981],"text":"\r\n                            Os materiais no site da NorteAcoes s√£o fornecidos &#34;como est√£o\". NorteAcoes n√£o oferece garantias, expressas ou impl√≠citas, e, por este meio, isenta e nega todas as outras garantias, incluindo, sem limita√ß√£o, garantias impl√≠citas ou condi√ß√µes de comercializa√ß√£o, adequa√ß√£o a um fim espec√≠fico ou n√£o viola√ß√£o de propriedade intelectual.\r\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2590,2981],"text":"\r\n                            Os materiais no site da NorteAcoes s√£o fornecidos &rdquo;como est√£o\". NorteAcoes n√£o oferece garantias, expressas ou impl√≠citas, e, por este meio, isenta e nega todas as outras garantias, incluindo, sem limita√ß√£o, garantias impl√≠citas ou condi√ß√µes de comercializa√ß√£o, adequa√ß√£o a um fim espec√≠fico ou n√£o viola√ß√£o de propriedade intelectual.\r\n                        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":42,"column":90,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2590,2981],"text":"\r\n                            Os materiais no site da NorteAcoes s√£o fornecidos \"como est√£o&quot;. NorteAcoes n√£o oferece garantias, expressas ou impl√≠citas, e, por este meio, isenta e nega todas as outras garantias, incluindo, sem limita√ß√£o, garantias impl√≠citas ou condi√ß√µes de comercializa√ß√£o, adequa√ß√£o a um fim espec√≠fico ou n√£o viola√ß√£o de propriedade intelectual.\r\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2590,2981],"text":"\r\n                            Os materiais no site da NorteAcoes s√£o fornecidos \"como est√£o&ldquo;. NorteAcoes n√£o oferece garantias, expressas ou impl√≠citas, e, por este meio, isenta e nega todas as outras garantias, incluindo, sem limita√ß√£o, garantias impl√≠citas ou condi√ß√µes de comercializa√ß√£o, adequa√ß√£o a um fim espec√≠fico ou n√£o viola√ß√£o de propriedade intelectual.\r\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2590,2981],"text":"\r\n                            Os materiais no site da NorteAcoes s√£o fornecidos \"como est√£o&#34;. NorteAcoes n√£o oferece garantias, expressas ou impl√≠citas, e, por este meio, isenta e nega todas as outras garantias, incluindo, sem limita√ß√£o, garantias impl√≠citas ou condi√ß√µes de comercializa√ß√£o, adequa√ß√£o a um fim espec√≠fico ou n√£o viola√ß√£o de propriedade intelectual.\r\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2590,2981],"text":"\r\n                            Os materiais no site da NorteAcoes s√£o fornecidos \"como est√£o&rdquo;. NorteAcoes n√£o oferece garantias, expressas ou impl√≠citas, e, por este meio, isenta e nega todas as outras garantias, incluindo, sem limita√ß√£o, garantias impl√≠citas ou condi√ß√µes de comercializa√ß√£o, adequa√ß√£o a um fim espec√≠fico ou n√£o viola√ß√£o de propriedade intelectual.\r\n                        "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { ArrowLeft } from 'lucide-react';\r\n\r\nexport default function TermsPage() {\r\n    return (\r\n        <div className=\"min-h-screen bg-[#0B0C15] text-gray-300 font-sans selection:bg-purple-500/30\">\r\n            <div className=\"max-w-4xl mx-auto px-6 py-12 md:py-20\">\r\n\r\n                <Link href=\"/\" className=\"inline-flex items-center gap-2 text-sm text-gray-500 hover:text-white transition-colors mb-8\">\r\n                    <ArrowLeft className=\"w-4 h-4\" /> Voltar para Home\r\n                </Link>\r\n\r\n                <h1 className=\"text-3xl md:text-5xl font-bold text-white mb-8\">Termos de Uso</h1>\r\n                <p className=\"text-gray-500 mb-12\">√öltima atualiza√ß√£o: {new Date().toLocaleDateString('pt-BR')}</p>\r\n\r\n                <div className=\"space-y-8 text-lg leading-relaxed\">\r\n                    <section>\r\n                        <h2 className=\"text-xl font-bold text-white mb-4\">1. Aceita√ß√£o dos Termos</h2>\r\n                        <p>\r\n                            Ao acessar e usar a plataforma NorteAcoes (\"Servi√ßo\"), voc√™ concorda em cumprir estes Termos de Uso e todas as leis aplic√°veis. Se voc√™ n√£o concordar com algum destes termos, est√° proibido de usar ou acessar este site.\r\n                        </p>\r\n                    </section>\r\n\r\n                    <section>\r\n                        <h2 className=\"text-xl font-bold text-white mb-4\">2. Licen√ßa de Uso</h2>\r\n                        <p>\r\n                            √â concedida permiss√£o para baixar temporariamente uma c√≥pia dos materiais (informa√ß√µes ou software) no site NorteAcoes, apenas para visualiza√ß√£o transit√≥ria pessoal e n√£o comercial. Esta √© a concess√£o de uma licen√ßa, n√£o uma transfer√™ncia de t√≠tulo, e sob esta licen√ßa voc√™ n√£o pode:\r\n                        </p>\r\n                        <ul className=\"list-disc pl-6 mt-4 space-y-2 text-gray-400\">\r\n                            <li>Modificar ou copiar os materiais;</li>\r\n                            <li>Usar os materiais para qualquer finalidade comercial ou para exibi√ß√£o p√∫blica;</li>\r\n                            <li>Tentar descompilar ou fazer engenharia reversa de qualquer software contido no site;</li>\r\n                            <li>Remover quaisquer direitos autorais ou outras nota√ß√µes de propriedade dos materiais.</li>\r\n                        </ul>\r\n                    </section>\r\n\r\n                    <section>\r\n                        <h2 className=\"text-xl font-bold text-white mb-4\">3. Isen√ß√£o de Responsabilidade (Disclaimer)</h2>\r\n                        <p>\r\n                            Os materiais no site da NorteAcoes s√£o fornecidos \"como est√£o\". NorteAcoes n√£o oferece garantias, expressas ou impl√≠citas, e, por este meio, isenta e nega todas as outras garantias, incluindo, sem limita√ß√£o, garantias impl√≠citas ou condi√ß√µes de comercializa√ß√£o, adequa√ß√£o a um fim espec√≠fico ou n√£o viola√ß√£o de propriedade intelectual.\r\n                        </p>\r\n                        <div className=\"p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg mt-4\">\r\n                            <p className=\"text-yellow-200 text-sm\">\r\n                                <strong>Importante:</strong> Nenhuma informa√ß√£o contida neste site constitui recomenda√ß√£o de investimento. A NorteAcoes √© uma ferramenta de an√°lise e n√£o se responsabiliza por perdas financeiras decorrentes do uso das informa√ß√µes aqui contidas.\r\n                            </p>\r\n                        </div>\r\n                    </section>\r\n\r\n                    <section>\r\n                        <h2 className=\"text-xl font-bold text-white mb-4\">4. Limita√ß√µes</h2>\r\n                        <p>\r\n                            Em nenhum caso a NorteAcoes ou seus fornecedores ser√£o respons√°veis por quaisquer danos (incluindo, sem limita√ß√£o, danos por perda de dados ou lucro ou devido a interrup√ß√£o dos neg√≥cios) decorrentes do uso ou da incapacidade de usar os materiais em NorteAcoes.\r\n                        </p>\r\n                    </section>\r\n\r\n                    <section>\r\n                        <h2 className=\"text-xl font-bold text-white mb-4\">5. Planos e Pagamentos</h2>\r\n                        <p>\r\n                            O servi√ßo oferece planos gratuitos e pagos (Premium). Ao assinar um plano pago, voc√™ concorda em pagar as taxas associadas. As assinaturas s√£o renovadas automaticamente, a menos que sejam canceladas com pelo menos 24 horas de anteced√™ncia ao final do per√≠odo atual.\r\n                        </p>\r\n                        <p className=\"mt-4\">\r\n                            Voc√™ pode gerenciar ou cancelar sua assinatura a qualquer momento atrav√©s das configura√ß√µes da sua conta.\r\n                        </p>\r\n                    </section>\r\n\r\n                </div>\r\n\r\n                <div className=\"mt-20 pt-8 border-t border-white/10 text-center text-gray-500 text-sm\">\r\n                    <p>D√∫vidas? Entre em contato: suporte@norteacoes.com</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\app\\update-password\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":58,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1951,1954],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1951,1954],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { Lock, ArrowRight, Eye, EyeOff, CheckCircle, AlertCircle } from 'lucide-react';\r\nimport { supabase } from '@/lib/supabase';\r\n\r\nexport default function UpdatePasswordPage() {\r\n    const router = useRouter();\r\n    const [password, setPassword] = useState('');\r\n    const [confirmPassword, setConfirmPassword] = useState('');\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [success, setSuccess] = useState(false);\r\n\r\n    // Check if user is authenticated (Supabase handles the hash fragment automatically)\r\n    useEffect(() => {\r\n        supabase.auth.getSession().then(({ data: { session } }) => {\r\n            if (!session) {\r\n                // If no session, it might be expired or invalid link\r\n                setError(\"Link inv√°lido ou expirado. Tente solicitar novamente.\");\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        if (password.length < 6) {\r\n            setError(\"A senha deve ter no m√≠nimo 6 caracteres.\");\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        if (password !== confirmPassword) {\r\n            setError(\"As senhas n√£o coincidem.\");\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const { error } = await supabase.auth.updateUser({ password });\r\n\r\n            if (error) throw error;\r\n\r\n            setSuccess(true);\r\n\r\n            // Redirect after 3 seconds\r\n            setTimeout(() => {\r\n                router.push('/login');\r\n            }, 3000);\r\n\r\n        } catch (err: any) {\r\n            setError(err.message || 'Erro ao atualizar senha.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (success) {\r\n        return (\r\n            <div className=\"min-h-screen bg-[#0B0C15] text-white flex items-center justify-center p-4\">\r\n                <motion.div\r\n                    initial={{ opacity: 0, scale: 0.9 }}\r\n                    animate={{ opacity: 1, scale: 1 }}\r\n                    className=\"w-full max-w-md bg-[#161726]/80 backdrop-blur-xl border border-green-500/20 p-8 rounded-3xl text-center\"\r\n                >\r\n                    <div className=\"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6 text-green-400\">\r\n                        <CheckCircle className=\"w-8 h-8\" />\r\n                    </div>\r\n                    <h2 className=\"text-2xl font-bold text-white mb-2\">Senha Atualizada!</h2>\r\n                    <p className=\"text-gray-400 mb-6\">Sua senha foi redefinida com sucesso. Voc√™ ser√° redirecionado para o login.</p>\r\n                    <Link\r\n                        href=\"/login\"\r\n                        className=\"inline-block bg-white/10 hover:bg-white/20 text-white font-medium px-6 py-2 rounded-lg transition-colors\"\r\n                    >\r\n                        Ir para Login agora\r\n                    </Link>\r\n                </motion.div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#0B0C15] text-white flex items-center justify-center p-4 relative overflow-hidden\">\r\n            {/* Background */}\r\n            <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\r\n                <div className=\"absolute top-[-10%] left-[20%] w-[500px] h-[500px] bg-purple-600/10 rounded-full blur-[100px]\" />\r\n            </div>\r\n\r\n            <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                className=\"w-full max-w-md bg-[#161726]/80 backdrop-blur-xl border border-white/5 p-8 rounded-3xl shadow-2xl relative z-10\"\r\n            >\r\n                <div className=\"mb-8 text-center\">\r\n                    <h1 className=\"text-3xl font-bold mb-2\">Nova Senha</h1>\r\n                    <p className=\"text-gray-400\">Defina sua nova senha de acesso.</p>\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                    {error && (\r\n                        <div className=\"p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm flex items-center gap-2\">\r\n                            <AlertCircle className=\"w-4 h-4 shrink-0\" />\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"space-y-4\">\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-gray-400 mb-2\">Nova Senha</label>\r\n                            <div className=\"relative\">\r\n                                <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500\" />\r\n                                <input\r\n                                    type={showPassword ? 'text' : 'password'}\r\n                                    required\r\n                                    value={password}\r\n                                    onChange={(e) => setPassword(e.target.value)}\r\n                                    placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\r\n                                    className=\"w-full bg-[#0B0C15] border border-white/10 rounded-xl px-12 py-3.5 text-white placeholder-gray-600 focus:outline-none focus:border-purple-500 transition-colors\"\r\n                                />\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setShowPassword(!showPassword)}\r\n                                    className=\"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white\"\r\n                                >\r\n                                    {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-gray-400 mb-2\">Confirmar Nova Senha</label>\r\n                            <div className=\"relative\">\r\n                                <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500\" />\r\n                                <input\r\n                                    type={showPassword ? 'text' : 'password'}\r\n                                    required\r\n                                    value={confirmPassword}\r\n                                    onChange={(e) => setConfirmPassword(e.target.value)}\r\n                                    placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\r\n                                    className=\"w-full bg-[#0B0C15] border border-white/10 rounded-xl px-12 py-3.5 text-white placeholder-gray-600 focus:outline-none focus:border-purple-500 transition-colors\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className=\"w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white font-bold py-3.5 rounded-xl transition-all shadow-lg shadow-purple-500/25 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                    >\r\n                        {loading ? 'Atualizando...' : 'Definir Nova Senha'}\r\n                        {!loading && <ArrowRight className=\"w-5 h-5\" />}\r\n                    </button>\r\n                </form>\r\n            </motion.div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\components\\FOMOWidget.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'topStocks' is defined but never used.","line":19,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":58}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { motion } from 'framer-motion';\r\nimport { TrendingUp, Lock, Sparkles, ArrowRight } from 'lucide-react';\r\nimport { useRouter } from 'next/navigation';\r\n\r\ninterface FOMOWidgetProps {\r\n    isPremium: boolean;\r\n    topStocks: Array<{ papel: string; super_score?: number; }>;\r\n}\r\n\r\n// Simulated data for FOMO - in production this would come from API tracking\r\nconst MISSED_OPPORTUNITIES = [\r\n    { ticker: 'VALE3', gain: 15.2, days: 7 },\r\n    { ticker: 'PETR4', gain: 8.7, days: 14 },\r\n    { ticker: 'BBAS3', gain: 12.1, days: 7 },\r\n];\r\n\r\nexport default function FOMOWidget({ isPremium, topStocks }: FOMOWidgetProps) {\r\n    const router = useRouter();\r\n\r\n    // Don't show for premium users\r\n    if (isPremium) return null;\r\n\r\n    const totalMissedGain = MISSED_OPPORTUNITIES.reduce((sum, opp) => sum + opp.gain, 0);\r\n\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            className=\"mb-6 rounded-xl bg-gradient-to-r from-red-900/30 to-orange-900/30 border border-red-500/30 overflow-hidden\"\r\n        >\r\n            {/* Header */}\r\n            <div className=\"p-4 border-b border-red-500/20\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className=\"w-10 h-10 rounded-full bg-red-500/20 flex items-center justify-center animate-pulse\">\r\n                            <TrendingUp className=\"w-5 h-5 text-red-400\" />\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"font-bold text-white\">O que voc√™ est√° perdendo</h3>\r\n                            <p className=\"text-sm text-white/50\">Oportunidades da √∫ltima semana</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                        <p className=\"text-2xl font-bold text-red-400\">+{totalMissedGain.toFixed(1)}%</p>\r\n                        <p className=\"text-xs text-white/40\">Ganho m√©dio</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Opportunities List */}\r\n            <div className=\"p-4 space-y-3\">\r\n                {MISSED_OPPORTUNITIES.map((opp, index) => (\r\n                    <div\r\n                        key={opp.ticker}\r\n                        className=\"flex items-center justify-between p-3 rounded-lg bg-white/5\"\r\n                    >\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <span className=\"text-white/40 text-sm\">#{index + 1}</span>\r\n                            <div>\r\n                                <p className=\"font-bold text-white\">{opp.ticker}</p>\r\n                                <p className=\"text-xs text-white/40\">√öltimos {opp.days} dias</p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <span className=\"text-green-400 font-bold\">+{opp.gain}%</span>\r\n                            <Lock className=\"w-4 h-4 text-yellow-400\" />\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* CTA */}\r\n            <div className=\"p-4 bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border-t border-yellow-500/20\">\r\n                <div className=\"flex items-center justify-between flex-wrap gap-3\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Sparkles className=\"w-5 h-5 text-yellow-400\" />\r\n                        <p className=\"text-sm text-white/80\">\r\n                            N√£o perca mais oportunidades como essas\r\n                        </p>\r\n                    </div>\r\n                    <motion.button\r\n                        whileHover={{ scale: 1.05 }}\r\n                        whileTap={{ scale: 0.95 }}\r\n                        onClick={() => router.push('/pricing')}\r\n                        className=\"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-black font-bold rounded-lg text-sm\"\r\n                    >\r\n                        Ver Oportunidades\r\n                        <ArrowRight className=\"w-4 h-4\" />\r\n                    </motion.button>\r\n                </div>\r\n            </div>\r\n        </motion.div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\components\\PremiumFilters.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\components\\PremiumFilters.tsx:76:9\n  74 |         // Count active filters\n  75 |         const count = Object.values(filters).filter(v => v !== null && v !== '').length;\n> 76 |         setActiveFiltersCount(count);\n     |         ^^^^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  77 |         onFiltersChange(filters);\n  78 |     }, [filters, onFiltersChange]);\n  79 |","line":76,"column":9,"nodeType":null,"endLine":76,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":80,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2107,2110],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2107,2110],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'label' is defined but never used.","line":480,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":480,"endColumn":38}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    Filter,\r\n    Lock,\r\n    ChevronDown,\r\n    X,\r\n    Zap,\r\n    Building2,\r\n    TrendingUp,\r\n    Percent,\r\n    BarChart3,\r\n    DollarSign,\r\n    Activity,\r\n    Target,\r\n    Sparkles\r\n} from 'lucide-react';\r\n\r\ninterface PremiumFiltersProps {\r\n    isPremium: boolean;\r\n    sectors: string[];\r\n    onFiltersChange: (filters: FilterValues) => void;\r\n    onUpgradeClick: () => void;\r\n}\r\n\r\nexport interface FilterValues {\r\n    setor: string | null;\r\n    subsetor: string | null;\r\n    minPl: number | null;\r\n    maxPl: number | null;\r\n    minPvp: number | null;\r\n    maxPvp: number | null;\r\n    minDy: number | null;\r\n    minRoe: number | null;\r\n    minRoic: number | null;\r\n    minGraham: number | null;\r\n    minGreenblatt: number | null;\r\n    minBazin: number | null;\r\n    minQualidade: number | null;\r\n    minLiquidity: number | null;\r\n    companyType: string | null;\r\n    minMargin: number | null;\r\n    minGrowth: number | null;\r\n}\r\n\r\nconst defaultFilters: FilterValues = {\r\n    setor: null,\r\n    subsetor: null,\r\n    minPl: null,\r\n    maxPl: null,\r\n    minPvp: null,\r\n    maxPvp: null,\r\n    minDy: null,\r\n    minRoe: null,\r\n    minRoic: null,\r\n    minGraham: null,\r\n    minGreenblatt: null,\r\n    minBazin: null,\r\n    minQualidade: null,\r\n    minLiquidity: null,\r\n    companyType: null,\r\n    minMargin: null,\r\n    minGrowth: null,\r\n};\r\n\r\nexport default function PremiumFilters({ isPremium, sectors, onFiltersChange, onUpgradeClick }: PremiumFiltersProps) {\r\n    const [isExpanded, setIsExpanded] = useState(false);\r\n    const [filters, setFilters] = useState<FilterValues>(defaultFilters);\r\n    const [activeFiltersCount, setActiveFiltersCount] = useState(0);\r\n\r\n    useEffect(() => {\r\n        // Count active filters\r\n        const count = Object.values(filters).filter(v => v !== null && v !== '').length;\r\n        setActiveFiltersCount(count);\r\n        onFiltersChange(filters);\r\n    }, [filters, onFiltersChange]);\r\n\r\n    const updateFilter = (key: keyof FilterValues, value: any) => {\r\n        if (!isPremium) {\r\n            onUpgradeClick();\r\n            return;\r\n        }\r\n        setFilters(prev => ({ ...prev, [key]: value || null }));\r\n    };\r\n\r\n    const clearFilters = () => {\r\n        setFilters(defaultFilters);\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <motion.div\r\n            className=\"card mb-6 overflow-hidden\"\r\n            initial={false}\r\n        >\r\n            {/* Header */}\r\n            <div\r\n                className=\"flex items-center justify-between cursor-pointer\"\r\n                onClick={() => setIsExpanded(!isExpanded)}\r\n            >\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center\">\r\n                        <Filter className=\"w-5 h-5 text-white\" />\r\n                    </div>\r\n                    <div>\r\n                        <h3 className=\"font-bold text-white flex items-center gap-2\">\r\n                            Filtros Inteligentes\r\n                            {!isPremium && (\r\n                                <span className=\"px-2 py-0.5 rounded-full bg-yellow-500/20 text-yellow-400 text-xs font-medium flex items-center gap-1\">\r\n                                    <Lock className=\"w-3 h-3\" />\r\n                                    Premium\r\n                                </span>\r\n                            )}\r\n                        </h3>\r\n                        <p className=\"text-white/50 text-sm\">\r\n                            {activeFiltersCount > 0\r\n                                ? `${activeFiltersCount} filtro(s) ativo(s)`\r\n                                : '15 filtros dispon√≠veis'}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-3\">\r\n                    {activeFiltersCount > 0 && (\r\n                        <button\r\n                            onClick={(e) => { e.stopPropagation(); clearFilters(); }}\r\n                            className=\"text-xs text-white/50 hover:text-white flex items-center gap-1\"\r\n                        >\r\n                            <X className=\"w-3 h-3\" />\r\n                            Limpar\r\n                        </button>\r\n                    )}\r\n                    <motion.div\r\n                        animate={{ rotate: isExpanded ? 180 : 0 }}\r\n                        transition={{ duration: 0.2 }}\r\n                    >\r\n                        <ChevronDown className=\"w-5 h-5 text-white/50\" />\r\n                    </motion.div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Filters Content */}\r\n            <AnimatePresence>\r\n                {isExpanded && (\r\n                    <motion.div\r\n                        initial={{ height: 0, opacity: 0 }}\r\n                        animate={{ height: 'auto', opacity: 1 }}\r\n                        exit={{ height: 0, opacity: 0 }}\r\n                        transition={{ duration: 0.3 }}\r\n                        className=\"overflow-hidden\"\r\n                    >\r\n                        <div className=\"pt-6 border-t border-white/10 mt-4\">\r\n                            {/* Upgrade Banner for Free Users */}\r\n                            {!isPremium && (\r\n                                <motion.div\r\n                                    className=\"mb-6 p-4 rounded-xl bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-500/30\"\r\n                                    initial={{ y: -10, opacity: 0 }}\r\n                                    animate={{ y: 0, opacity: 1 }}\r\n                                >\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <Sparkles className=\"w-6 h-6 text-yellow-400\" />\r\n                                            <div>\r\n                                                <p className=\"font-bold text-white\">Desbloqueie 15 Filtros Premium</p>\r\n                                                <p className=\"text-sm text-white/60\">Encontre as a√ß√µes perfeitas para seu perfil</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <button\r\n                                            onClick={onUpgradeClick}\r\n                                            className=\"px-4 py-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-black font-bold rounded-lg text-sm hover:scale-105 transition-transform\"\r\n                                        >\r\n                                            Assinar Pro\r\n                                        </button>\r\n                                    </div>\r\n                                </motion.div>\r\n                            )}\r\n\r\n                            {/* Filter Grid */}\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                                {/* SETOR */}\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs text-white/50 flex items-center gap-1\">\r\n                                        <Building2 className=\"w-3 h-3\" />\r\n                                        Setor\r\n                                    </label>\r\n                                    <FilterLock isPremium={isPremium} onUpgradeClick={onUpgradeClick} label=\"Setor\">\r\n                                        <select\r\n                                            value={filters.setor || ''}\r\n                                            onChange={(e) => updateFilter('setor', e.target.value)}\r\n                                            className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:border-cyan-500 focus:outline-none\"\r\n                                        >\r\n                                            <option value=\"\">Todos os setores</option>\r\n                                            {sectors.map(s => (\r\n                                                <option key={s} value={s}>{s}</option>\r\n                                            ))}\r\n                                        </select>\r\n                                    </FilterLock>\r\n                                </div>\r\n\r\n                                {/* TIPO EMPRESA */}\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs text-white/50 flex items-center gap-1\">\r\n                                        <Target className=\"w-3 h-3\" />\r\n                                        Tipo de Empresa\r\n                                    </label>\r\n                                    <FilterLock isPremium={isPremium} onUpgradeClick={onUpgradeClick} label=\"Tipo\">\r\n                                        <select\r\n                                            value={filters.companyType || ''}\r\n                                            onChange={(e) => updateFilter('companyType', e.target.value)}\r\n                                            className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:border-cyan-500 focus:outline-none\"\r\n                                        >\r\n                                            <option value=\"\">Todas</option>\r\n                                            <option value=\"blue_chips\">üíé Blue Chips</option>\r\n                                            <option value=\"mid_caps\">üìä Mid Caps</option>\r\n                                            <option value=\"small_caps\">üöÄ Small Caps</option>\r\n                                        </select>\r\n                                    </FilterLock>\r\n                                </div>\r\n\r\n                                {/* P/L Range */}\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs text-white/50 flex items-center gap-1\">\r\n                                        <BarChart3 className=\"w-3 h-3\" />\r\n                                        P/L (Pre√ßo/Lucro)\r\n                                    </label>\r\n                                    <FilterLock isPremium={isPremium} onUpgradeClick={onUpgradeClick} label=\"P/L\">\r\n                                        <div className=\"flex gap-2\">\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                placeholder=\"Min\"\r\n                                                value={filters.minPl || ''}\r\n                                                onChange={(e) => updateFilter('minPl', parseFloat(e.target.value))}\r\n                                                className=\"w-1/2 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:border-cyan-500 focus:outline-none\"\r\n                                            />\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                placeholder=\"Max\"\r\n                                                value={filters.maxPl || ''}\r\n                                                onChange={(e) => updateFilter('maxPl', parseFloat(e.target.value))}\r\n                                                className=\"w-1/2 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:border-cyan-500 focus:outline-none\"\r\n                                            />\r\n                                        </div>\r\n                                    </FilterLock>\r\n                                </div>\r\n\r\n                                {/* P/VP Range */}\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs text-white/50 flex items-center gap-1\">\r\n                                        <BarChart3 className=\"w-3 h-3\" />\r\n                                        P/VP (Pre√ßo/Valor)\r\n                                    </label>\r\n                                    <FilterLock isPremium={isPremium} onUpgradeClick={onUpgradeClick} label=\"P/VP\">\r\n                                        <div className=\"flex gap-2\">\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                placeholder=\"Min\"\r\n                                                step=\"0.1\"\r\n                                                value={filters.minPvp || ''}\r\n                                                onChange={(e) => updateFilter('minPvp', parseFloat(e.target.value))}\r\n                                                className=\"w-1/2 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:border-cyan-500 focus:outline-none\"\r\n                                            />\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                placeholder=\"Max\"\r\n                                                step=\"0.1\"\r\n                                                value={filters.maxPvp || ''}\r\n                                                onChange={(e) => updateFilter('maxPvp', parseFloat(e.target.value))}\r\n                                                className=\"w-1/2 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:border-cyan-500 focus:outline-none\"\r\n                                            />\r\n                                        </div>\r\n                                    </FilterLock>\r\n                                </div>\r\n\r\n                                {/* Dividend Yield */}\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs text-white/50 flex items-center gap-1\">\r\n                                        <DollarSign className=\"w-3 h-3\" />\r\n                                        Dividend Yield M√≠nimo\r\n                                    </label>\r\n                                    <FilterLock isPremium={isPremium} onUpgradeClick={onUpgradeClick} label=\"DY\">\r\n                                        <div className=\"relative\">\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                placeholder=\"Ex: 6\"\r\n                                                min=\"0\"\r\n                                                step=\"0.5\"\r\n                                                value={filters.minDy || ''}\r\n                                                onChange={(e) => updateFilter('minDy', parseFloat(e.target.value))}\r\n                                                className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 pr-8 text-sm text-white focus:border-cyan-500 focus:outline-none\"\r\n                                            />\r\n                                            <span className=\"absolute right-3 top-1/2 -translate-y-1/2 text-white/30 text-sm\">%</span>\r\n                                        </div>\r\n                                    </FilterLock>\r\n                                </div>\r\n\r\n                                {/* ROE */}\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs text-white/50 flex items-center gap-1\">\r\n                                        <TrendingUp className=\"w-3 h-3\" />\r\n                                        ROE M√≠nimo\r\n                                    </label>\r\n                                    <FilterLock isPremium={isPremium} onUpgradeClick={onUpgradeClick} label=\"ROE\">\r\n                                        <div className=\"relative\">\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                placeholder=\"Ex: 15\"\r\n                                                value={filters.minRoe || ''}\r\n                                                onChange={(e) => updateFilter('minRoe', parseFloat(e.target.value))}\r\n                                                className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 pr-8 text-sm text-white focus:border-cyan-500 focus:outline-none\"\r\n                                            />\r\n                                            <span className=\"absolute right-3 top-1/2 -translate-y-1/2 text-white/30 text-sm\">%</span>\r\n                                        </div>\r\n                                    </FilterLock>\r\n                                </div>\r\n\r\n                                {/* ROIC */}\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs text-white/50 flex items-center gap-1\">\r\n                                        <Activity className=\"w-3 h-3\" />\r\n                                        ROIC M√≠nimo\r\n                                    </label>\r\n                                    <FilterLock isPremium={isPremium} onUpgradeClick={onUpgradeClick} label=\"ROIC\">\r\n                                        <div className=\"relative\">\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                placeholder=\"Ex: 10\"\r\n                                                value={filters.minRoic || ''}\r\n                                                onChange={(e) => updateFilter('minRoic', parseFloat(e.target.value))}\r\n                                                className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 pr-8 text-sm text-white focus:border-cyan-500 focus:outline-none\"\r\n                                            />\r\n                                            <span className=\"absolute right-3 top-1/2 -translate-y-1/2 text-white/30 text-sm\">%</span>\r\n                                        </div>\r\n                                    </FilterLock>\r\n                                </div>\r\n\r\n                                {/* Margem L√≠quida */}\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-xs text-white/50 flex items-center gap-1\">\r\n                                        <Percent className=\"w-3 h-3\" />\r\n                                        Margem L√≠quida M√≠nima\r\n                                    </label>\r\n                                    <FilterLock isPremium={isPremium} onUpgradeClick={onUpgradeClick} label=\"Margem\">\r\n                                        <div className=\"relative\">\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                placeholder=\"Ex: 10\"\r\n                                                value={filters.minMargin || ''}\r\n                                                onChange={(e) => updateFilter('minMargin', parseFloat(e.target.value))}\r\n                                                className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 pr-8 text-sm text-white focus:border-cyan-500 focus:outline-none\"\r\n                                            />\r\n                                            <span className=\"absolute right-3 top-1/2 -translate-y-1/2 text-white/30 text-sm\">%</span>\r\n                                        </div>\r\n                                    </FilterLock>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Strategy Scores Row */}\r\n                            <div className=\"mt-6 pt-4 border-t border-white/5\">\r\n                                <h4 className=\"text-sm font-medium text-white/70 mb-3 flex items-center gap-2\">\r\n                                    <Zap className=\"w-4 h-4 text-yellow-400\" />\r\n                                    Scores por Estrat√©gia\r\n                                </h4>\r\n                                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                                    {/* Graham */}\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-xs text-white/50\">Score Graham</label>\r\n                                        <FilterLock isPremium={isPremium} onUpgradeClick={onUpgradeClick} label=\"Graham\">\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                placeholder=\"Min\"\r\n                                                step=\"0.5\"\r\n                                                max=\"5\"\r\n                                                value={filters.minGraham || ''}\r\n                                                onChange={(e) => updateFilter('minGraham', parseFloat(e.target.value))}\r\n                                                className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:border-cyan-500 focus:outline-none\"\r\n                                            />\r\n                                        </FilterLock>\r\n                                    </div>\r\n\r\n                                    {/* Greenblatt */}\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-xs text-white/50\">Score Greenblatt</label>\r\n                                        <FilterLock isPremium={isPremium} onUpgradeClick={onUpgradeClick} label=\"Greenblatt\">\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                placeholder=\"Min\"\r\n                                                step=\"0.5\"\r\n                                                max=\"5\"\r\n                                                value={filters.minGreenblatt || ''}\r\n                                                onChange={(e) => updateFilter('minGreenblatt', parseFloat(e.target.value))}\r\n                                                className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:border-cyan-500 focus:outline-none\"\r\n                                            />\r\n                                        </FilterLock>\r\n                                    </div>\r\n\r\n                                    {/* Bazin */}\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-xs text-white/50\">Score Bazin</label>\r\n                                        <FilterLock isPremium={isPremium} onUpgradeClick={onUpgradeClick} label=\"Bazin\">\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                placeholder=\"Min\"\r\n                                                step=\"0.5\"\r\n                                                max=\"5\"\r\n                                                value={filters.minBazin || ''}\r\n                                                onChange={(e) => updateFilter('minBazin', parseFloat(e.target.value))}\r\n                                                className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:border-cyan-500 focus:outline-none\"\r\n                                            />\r\n                                        </FilterLock>\r\n                                    </div>\r\n\r\n                                    {/* Qualidade */}\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-xs text-white/50\">Score Qualidade</label>\r\n                                        <FilterLock isPremium={isPremium} onUpgradeClick={onUpgradeClick} label=\"Qualidade\">\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                placeholder=\"Min\"\r\n                                                step=\"0.5\"\r\n                                                max=\"7\"\r\n                                                value={filters.minQualidade || ''}\r\n                                                onChange={(e) => updateFilter('minQualidade', parseFloat(e.target.value))}\r\n                                                className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:border-cyan-500 focus:outline-none\"\r\n                                            />\r\n                                        </FilterLock>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Liquidity and Growth Row */}\r\n                            <div className=\"mt-6 pt-4 border-t border-white/5\">\r\n                                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                                    {/* Liquidez */}\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-xs text-white/50\">Liquidez M√≠nima</label>\r\n                                        <FilterLock isPremium={isPremium} onUpgradeClick={onUpgradeClick} label=\"Liquidez\">\r\n                                            <select\r\n                                                value={filters.minLiquidity || ''}\r\n                                                onChange={(e) => updateFilter('minLiquidity', parseFloat(e.target.value))}\r\n                                                className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:border-cyan-500 focus:outline-none\"\r\n                                            >\r\n                                                <option value=\"\">Qualquer</option>\r\n                                                <option value=\"1000000\">{'> R$ 1M'}</option>\r\n                                                <option value=\"10000000\">{'> R$ 10M'}</option>\r\n                                                <option value=\"50000000\">{'> R$ 50M'}</option>\r\n                                                <option value=\"100000000\">{'> R$ 100M'}</option>\r\n                                            </select>\r\n                                        </FilterLock>\r\n                                    </div>\r\n\r\n                                    {/* Crescimento */}\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-xs text-white/50\">Crescimento Receita 5a</label>\r\n                                        <FilterLock isPremium={isPremium} onUpgradeClick={onUpgradeClick} label=\"Crescimento\">\r\n                                            <div className=\"relative\">\r\n                                                <input\r\n                                                    type=\"number\"\r\n                                                    placeholder=\"Min\"\r\n                                                    value={filters.minGrowth || ''}\r\n                                                    onChange={(e) => updateFilter('minGrowth', parseFloat(e.target.value))}\r\n                                                    className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 pr-8 text-sm text-white focus:border-cyan-500 focus:outline-none\"\r\n                                                />\r\n                                                <span className=\"absolute right-3 top-1/2 -translate-y-1/2 text-white/30 text-sm\">%</span>\r\n                                            </div>\r\n                                        </FilterLock>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </motion.div>\r\n    );\r\n}\r\n\r\nfunction FilterLock({ children, label, isPremium, onUpgradeClick }: { children: React.ReactNode; label: string; isPremium: boolean; onUpgradeClick: () => void }) {\r\n    if (isPremium) return <>{children}</>;\r\n\r\n    return (\r\n        <div className=\"relative group\">\r\n            <div className=\"opacity-50 pointer-events-none blur-[1px]\">\r\n                {children}\r\n            </div>\r\n            <div\r\n                className=\"absolute inset-0 flex items-center justify-center cursor-pointer\"\r\n                onClick={onUpgradeClick}\r\n            >\r\n                <div className=\"bg-slate-800/90 backdrop-blur-sm rounded-lg px-3 py-1 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                    <Lock className=\"w-3 h-3 text-yellow-400\" />\r\n                    <span className=\"text-xs text-yellow-400 font-medium\">Premium</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\components\\PremiumLock.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\components\\StockCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isPremium' is defined but never used.","line":24,"column":51,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":60}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Zap } from 'lucide-react';\r\n\r\ninterface Stock {\r\n    papel: string;\r\n    setor?: string;\r\n    cotacao?: number;\r\n    p_l?: number;\r\n    p_vp?: number;\r\n    dividend_yield?: number;\r\n    super_score?: number;\r\n}\r\n\r\ninterface StockCardProps {\r\n    stock: Stock;\r\n    index: number;\r\n    isPremium: boolean;\r\n    onClick: (stock: Stock) => void;\r\n    isSelected?: boolean;\r\n    onToggleSelect?: (stock: Stock) => void;\r\n}\r\n\r\nexport default function StockCard({ stock, index, isPremium, onClick, isSelected, onToggleSelect }: StockCardProps) {\r\n    const getScoreColor = (score: number) => {\r\n        if (score >= 12) return 'text-green-400 bg-green-500/20';\r\n        if (score >= 8) return 'text-yellow-400 bg-yellow-500/20';\r\n        return 'text-red-400 bg-red-500/20';\r\n    };\r\n\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: index * 0.03 }}\r\n            className={`rounded-xl bg-slate-800/60 border border-white/10 p-4 cursor-pointer hover:border-cyan-400/50 hover:bg-slate-800/80 transition-all ${isSelected ? 'border-yellow-400 ring-1 ring-yellow-400' : ''}`}\r\n            onClick={() => onClick(stock)}\r\n        >\r\n            {/* Header: Name + Score */}\r\n            <div className=\"flex justify-between items-start mb-3\">\r\n                <div>\r\n                    <h3 className=\"text-lg font-bold text-white truncate\">{stock.papel}</h3>\r\n                    <p className=\"text-xs text-white/40\">{stock.setor?.slice(0, 20) || 'N/A'}</p>\r\n                </div>\r\n                <div className={`px-2 py-1 rounded-lg text-sm font-bold flex items-center gap-1 ${getScoreColor(stock.super_score || 0)}`}>\r\n                    <Zap className=\"w-3 h-3\" />\r\n                    {stock.super_score !== undefined ? stock.super_score.toFixed(1) : '0.0'}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Price */}\r\n            <p className=\"text-xl font-bold text-white mb-3\">\r\n                R$ {stock.cotacao !== undefined ? stock.cotacao.toFixed(2) : '--'}\r\n            </p>\r\n\r\n            {/* Key Metrics - Only 3 */}\r\n            <div className=\"grid grid-cols-3 gap-2 text-center\">\r\n                <div className=\"bg-white/5 rounded-lg py-2\">\r\n                    <p className=\"text-xs text-white/40\">P/L</p>\r\n                    <p className=\"text-sm font-semibold text-white\">{stock.p_l?.toFixed(1) || 'N/A'}</p>\r\n                </div>\r\n                <div className=\"bg-white/5 rounded-lg py-2\">\r\n                    <p className=\"text-xs text-white/40\">P/VP</p>\r\n                    <p className=\"text-sm font-semibold text-white\">{stock.p_vp?.toFixed(1) || 'N/A'}</p>\r\n                </div>\r\n                <div className=\"bg-white/5 rounded-lg py-2\">\r\n                    <p className=\"text-xs text-white/40\">DY</p>\r\n                    <p className={`text-sm font-semibold ${stock.dividend_yield && stock.dividend_yield > 6 ? 'text-green-400' : 'text-white'}`}>\r\n                        {stock.dividend_yield?.toFixed(1) || '0'}%\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Battle Selection Button - Always Visible */}\r\n            {onToggleSelect && (\r\n                <button\r\n                    onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        onToggleSelect(stock);\r\n                    }}\r\n                    className={`mt-3 w-full py-2.5 rounded-lg text-sm font-bold transition-all flex items-center justify-center gap-2 ${isSelected\r\n                        ? 'bg-yellow-400 text-black border-2 border-yellow-300'\r\n                        : 'bg-purple-600/30 text-purple-300 border border-purple-500/50 hover:bg-purple-600/50 hover:text-white'\r\n                        }`}\r\n                >\r\n                    <Zap className=\"w-4 h-4\" />\r\n                    {isSelected ? '‚úì Selecionado para Batalha' : '‚öîÔ∏è Comparar A√ß√£o'}\r\n                </button>\r\n            )}\r\n        </motion.div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\components\\StockComparisonModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used.","line":2,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Check' is defined but never used.","line":2,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { motion } from 'framer-motion';\r\nimport { X, Trophy, AlertTriangle, Check, Zap } from 'lucide-react';\r\n\r\ninterface Stock {\r\n    papel: string;\r\n    setor?: string;\r\n    cotacao?: number;\r\n    p_l?: number;\r\n    p_vp?: number;\r\n    dividend_yield?: number;\r\n    roe?: number;\r\n    roic?: number;\r\n    margem_liquida?: number;\r\n    liquidez_corrente?: number;\r\n    div_bruta_patrimonio?: number;\r\n    super_score?: number;\r\n    score_graham?: number;\r\n    score_greenblatt?: number;\r\n    score_bazin?: number;\r\n    score_qualidade?: number;\r\n}\r\n\r\ninterface StockComparisonModalProps {\r\n    stockA: Stock;\r\n    stockB: Stock;\r\n    onClose: () => void;\r\n}\r\n\r\nexport default function StockComparisonModal({ stockA, stockB, onClose }: StockComparisonModalProps) {\r\n\r\n    // Helper to determine winner for a metric\r\n    // higherIsBetter: true for DY, ROE, Score. False for P/L, P/VP, Endividamento.\r\n    const getWinner = (valA: number | undefined, valB: number | undefined, higherIsBetter: boolean = true) => {\r\n        if (valA === undefined || valB === undefined || valA === null || valB === null) return null;\r\n        if (valA === valB) return 'tie';\r\n        if (higherIsBetter) return valA > valB ? 'A' : 'B';\r\n        return valA < valB ? 'A' : 'B';\r\n    };\r\n\r\n    const metrics = [\r\n        // Scores\r\n        { label: 'Super Score', key: 'super_score', higherIsBetter: true, format: (v: number) => v?.toFixed(1) ?? 'N/A' },\r\n        { label: 'Score Graham', key: 'score_graham', higherIsBetter: true, format: (v: number) => v?.toFixed(1) ?? 'N/A' },\r\n        { label: 'Score Greenblatt', key: 'score_greenblatt', higherIsBetter: true, format: (v: number) => v?.toFixed(1) ?? 'N/A' },\r\n        { label: 'Score Bazin', key: 'score_bazin', higherIsBetter: true, format: (v: number) => v?.toFixed(1) ?? 'N/A' },\r\n        { label: 'Score Qualidade', key: 'score_qualidade', higherIsBetter: true, format: (v: number) => v?.toFixed(1) ?? 'N/A' },\r\n\r\n        // Valuation\r\n        { label: 'Cota√ß√£o', key: 'cotacao', higherIsBetter: false, format: (v: number) => v ? `R$ ${v.toFixed(2)}` : 'N/A' },\r\n        { label: 'P/L', key: 'p_l', higherIsBetter: false, format: (v: number) => v?.toFixed(2) ?? 'N/A' },\r\n        { label: 'P/VP', key: 'p_vp', higherIsBetter: false, format: (v: number) => v?.toFixed(2) ?? 'N/A' },\r\n\r\n        // Dividendos & Rentabilidade\r\n        { label: 'Dividend Yield', key: 'dividend_yield', higherIsBetter: true, format: (v: number) => v ? `${v.toFixed(2)}%` : 'N/A' }, // FIXED: No *100\r\n        { label: 'ROE', key: 'roe', higherIsBetter: true, format: (v: number) => v ? `${v.toFixed(2)}%` : 'N/A' },\r\n        { label: 'ROIC', key: 'roic', higherIsBetter: true, format: (v: number) => v ? `${v.toFixed(2)}%` : 'N/A' },\r\n        { label: 'Margem L√≠quida', key: 'margem_liquida', higherIsBetter: true, format: (v: number) => v ? `${v.toFixed(2)}%` : 'N/A' },\r\n\r\n        // Sa√∫de Financeira\r\n        { label: 'Liquidez Corrente', key: 'liquidez_corrente', higherIsBetter: true, format: (v: number) => v?.toFixed(2) ?? 'N/A' },\r\n        { label: 'D√≠v.Bruta/Patrim.', key: 'div_bruta_patrimonio', higherIsBetter: false, format: (v: number) => v?.toFixed(2) ?? 'N/A' },\r\n    ];\r\n\r\n    // Calculate overall winner\r\n    let winsA = 0;\r\n    let winsB = 0;\r\n\r\n    metrics.forEach(m => {\r\n        const winner = getWinner(stockA[m.key as keyof Stock] as number, stockB[m.key as keyof Stock] as number, m.higherIsBetter);\r\n        if (winner === 'A') winsA++;\r\n        if (winner === 'B') winsB++;\r\n    });\r\n\r\n    const overallWinner = winsA > winsB ? 'A' : winsB > winsA ? 'B' : 'Tie';\r\n\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 bg-black/90 backdrop-blur-md z-[200] flex items-center justify-center p-4 overflow-y-auto\"\r\n            onClick={onClose}\r\n        >\r\n            <motion.div\r\n                initial={{ scale: 0.9, y: 20 }}\r\n                animate={{ scale: 1, y: 0 }}\r\n                exit={{ scale: 0.9, y: 20 }}\r\n                className=\"bg-slate-900 border border-white/10 rounded-2xl w-full max-w-4xl p-6 relative shadow-2xl shadow-purple-500/20\"\r\n                onClick={(e) => e.stopPropagation()}\r\n            >\r\n                <button\r\n                    onClick={onClose}\r\n                    className=\"absolute top-4 right-4 w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors z-10\"\r\n                >\r\n                    <X className=\"w-5 h-5 text-white/50\" />\r\n                </button>\r\n\r\n                <div className=\"text-center mb-8\">\r\n                    <h2 className=\"text-3xl font-bold gradient-text flex items-center justify-center gap-3\">\r\n                        <Zap className=\"w-8 h-8 text-yellow-400\" />\r\n                        Batalha de A√ß√µes\r\n                        <Zap className=\"w-8 h-8 text-yellow-400\" />\r\n                    </h2>\r\n                    <p className=\"text-white/40\">Comparativo lado a lado</p>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n                    {/* Stock A Header */}\r\n                    <div className={`text-center p-4 rounded-xl border transition-colors ${overallWinner === 'A' ? 'bg-gradient-to-b from-green-500/20 to-transparent border-green-500/50' : 'bg-white/5 border-white/5'}`}>\r\n                        <h3 className=\"text-2xl font-bold text-white mb-2\">{stockA.papel}</h3>\r\n                        <p className=\"text-white/50 text-sm mb-4\">{stockA.setor}</p>\r\n                        {overallWinner === 'A' && (\r\n                            <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-green-500/20 text-green-400 text-sm font-bold border border-green-500/30\">\r\n                                <Trophy className=\"w-4 h-4\" /> VENCEDORA\r\n                            </div>\r\n                        )}\r\n                        <div className=\"mt-4 text-3xl font-bold gradient-text\">\r\n                            {stockA.super_score?.toFixed(1)}\r\n                            <span className=\"text-sm text-white/30 block font-normal\">Super Score</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* VS */}\r\n                    <div className=\"flex items-center justify-center flex-col\">\r\n                        <span className=\"text-4xl font-black text-white/10 italic\">VS</span>\r\n                    </div>\r\n\r\n                    {/* Stock B Header */}\r\n                    <div className={`text-center p-4 rounded-xl border transition-colors ${overallWinner === 'B' ? 'bg-gradient-to-b from-green-500/20 to-transparent border-green-500/50' : 'bg-white/5 border-white/5'}`}>\r\n                        <h3 className=\"text-2xl font-bold text-white mb-2\">{stockB.papel}</h3>\r\n                        <p className=\"text-white/50 text-sm mb-4\">{stockB.setor}</p>\r\n                        {overallWinner === 'B' && (\r\n                            <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-green-500/20 text-green-400 text-sm font-bold border border-green-500/30\">\r\n                                <Trophy className=\"w-4 h-4\" /> VENCEDORA\r\n                            </div>\r\n                        )}\r\n                        <div className=\"mt-4 text-3xl font-bold gradient-text\">\r\n                            {stockB.super_score?.toFixed(1)}\r\n                            <span className=\"text-sm text-white/30 block font-normal\">Super Score</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Comparison Table */}\r\n                <div className=\"mt-8 space-y-2\">\r\n                    {metrics.map((metric) => {\r\n                        const valA = stockA[metric.key as keyof Stock] as number;\r\n                        const valB = stockB[metric.key as keyof Stock] as number;\r\n                        const winner = getWinner(valA, valB, metric.higherIsBetter);\r\n\r\n                        // Special formatting for % if needed, but for now assuming direct numbers or pre-formatted\r\n                        // Actually my 'format' function in metrics map handles it.\r\n                        // Re-verify 'format' logic for DY/ROE based on API response.\r\n                        // Assuming API returns straight numbers like 3.98 for 3.98%.\r\n\r\n                        const formattedA = metric.format ? metric.format(valA || 0) : valA;\r\n                        const formattedB = metric.format ? metric.format(valB || 0) : valB;\r\n\r\n                        return (\r\n                            <div key={metric.key} className=\"grid grid-cols-3 gap-2 md:gap-6 py-3 border-b border-white/5 hover:bg-white/5 transition-colors px-2 md:px-4 rounded-lg\">\r\n                                <div className={`text-right font-mono font-bold ${winner === 'A' ? 'text-green-400 scale-110 origin-right' : 'text-white/60'}`}>\r\n                                    {formattedA}\r\n                                </div>\r\n                                <div className=\"text-center text-white/40 text-sm flex items-center justify-center gap-2 uppercase tracking-wider\">\r\n                                    {metric.label}\r\n                                </div>\r\n                                <div className={`text-left font-mono font-bold ${winner === 'B' ? 'text-green-400 scale-110 origin-left' : 'text-white/60'}`}>\r\n                                    {formattedB}\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n\r\n                <div className=\"mt-8 text-center\">\r\n                    <p className=\"text-white/30 text-sm\">\r\n                        * A an√°lise automatizada considera apenas indicadores quantitativos.\r\n                    </p>\r\n                </div>\r\n\r\n            </motion.div>\r\n        </motion.div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\components\\Top3Podium.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'place' is defined but never used.","line":87,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":87,"endColumn":49}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { motion } from 'framer-motion';\r\nimport { Trophy, Zap, TrendingUp, Target, Star, Crown, Medal, Award } from 'lucide-react';\r\n\r\ninterface Stock {\r\n    papel: string;\r\n    setor?: string;\r\n    cotacao?: number;\r\n    p_l?: number;\r\n    p_vp?: number;\r\n    dividend_yield?: number;\r\n    roe?: number;\r\n    roic?: number;\r\n    score_graham?: number;\r\n    score_greenblatt?: number;\r\n    score_bazin?: number;\r\n    score_qualidade?: number;\r\n    super_score?: number;\r\n}\r\n\r\ninterface Top3PodiumProps {\r\n    stocks: Stock[];\r\n    onSelectStock: (stock: Stock) => void;\r\n}\r\n\r\nexport default function Top3Podium({ stocks, onSelectStock }: Top3PodiumProps) {\r\n    const top3 = stocks.slice(0, 3);\r\n\r\n    if (top3.length === 0) return null;\r\n\r\n    // Reorder for podium: 2nd, 1st, 3rd\r\n    const podiumOrder = top3.length >= 3\r\n        ? [top3[1], top3[0], top3[2]]\r\n        : top3;\r\n\r\n    const getPlacement = (index: number) => {\r\n        if (top3.length < 3) return index;\r\n        return index === 0 ? 1 : index === 1 ? 0 : 2;\r\n    };\r\n\r\n    const getMedalConfig = (place: number) => {\r\n        switch (place) {\r\n            case 0: return {\r\n                icon: Crown,\r\n                label: 'Campe√£o',\r\n                gradient: 'from-yellow-400 via-yellow-500 to-amber-600',\r\n                borderColor: 'border-yellow-500/50',\r\n                bgGlow: 'shadow-yellow-500/20',\r\n                textColor: 'text-yellow-400',\r\n                height: 'h-[420px]',\r\n                badgeBg: 'bg-gradient-to-r from-yellow-400 to-amber-500'\r\n            };\r\n            case 1: return {\r\n                icon: Medal,\r\n                label: 'Vice',\r\n                gradient: 'from-gray-300 via-gray-400 to-gray-500',\r\n                borderColor: 'border-gray-400/50',\r\n                bgGlow: 'shadow-gray-400/20',\r\n                textColor: 'text-gray-300',\r\n                height: 'h-[380px]',\r\n                badgeBg: 'bg-gradient-to-r from-gray-300 to-gray-400'\r\n            };\r\n            case 2: return {\r\n                icon: Award,\r\n                label: 'Bronze',\r\n                gradient: 'from-orange-400 via-orange-500 to-orange-600',\r\n                borderColor: 'border-orange-500/50',\r\n                bgGlow: 'shadow-orange-500/20',\r\n                textColor: 'text-orange-400',\r\n                height: 'h-[360px]',\r\n                badgeBg: 'bg-gradient-to-r from-orange-400 to-orange-600'\r\n            };\r\n            default: return {\r\n                icon: Star,\r\n                label: '',\r\n                gradient: 'from-gray-500 to-gray-600',\r\n                borderColor: 'border-gray-500/50',\r\n                bgGlow: '',\r\n                textColor: 'text-gray-400',\r\n                height: 'h-[340px]',\r\n                badgeBg: 'bg-gray-500'\r\n            };\r\n        }\r\n    };\r\n\r\n    const generateInsight = (stock: Stock, place: number): string => {\r\n        const insights = [];\r\n\r\n        if (stock.p_l && stock.p_l > 0 && stock.p_l < 10) {\r\n            insights.push(`P/L de ${stock.p_l.toFixed(1)}x (muito barato)`);\r\n        }\r\n        if (stock.dividend_yield && stock.dividend_yield > 8) {\r\n            insights.push(`DY de ${stock.dividend_yield.toFixed(1)}% (alto)`);\r\n        }\r\n        if (stock.roe && stock.roe > 20) {\r\n            insights.push(`ROE de ${stock.roe.toFixed(0)}% (excelente)`);\r\n        }\r\n        if (stock.score_graham && stock.score_graham >= 4) {\r\n            insights.push('Aprovado por Graham');\r\n        }\r\n        if (stock.score_qualidade && stock.score_qualidade >= 6) {\r\n            insights.push('Alta Qualidade');\r\n        }\r\n\r\n        if (insights.length === 0) {\r\n            insights.push('Equil√≠brio entre indicadores');\r\n        }\r\n\r\n        return insights[0];\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"mb-8\">\r\n            {/* Header */}\r\n            <div className=\"text-center mb-8\">\r\n                <motion.div\r\n                    initial={{ scale: 0, rotate: -180 }}\r\n                    animate={{ scale: 1, rotate: 0 }}\r\n                    transition={{ type: 'spring', stiffness: 200 }}\r\n                    className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-yellow-400 to-amber-600 mb-4 shadow-lg shadow-yellow-500/30\"\r\n                >\r\n                    <Trophy className=\"w-8 h-8 text-white\" />\r\n                </motion.div>\r\n                <h2 className=\"text-2xl font-bold text-white mb-2\">Top 3 A√ß√µes da Semana</h2>\r\n                <p className=\"text-white/50\">Melhores oportunidades baseadas no Super Score</p>\r\n            </div>\r\n\r\n            {/* Podium */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 items-end max-w-5xl mx-auto\">\r\n                {podiumOrder.map((stock, displayIndex) => {\r\n                    const place = getPlacement(displayIndex);\r\n                    const config = getMedalConfig(place);\r\n                    const MedalIcon = config.icon;\r\n\r\n                    return (\r\n                        <motion.div\r\n                            key={stock.papel}\r\n                            className={`relative ${displayIndex === 1 ? 'md:order-2' : displayIndex === 0 ? 'md:order-1' : 'md:order-3'}`}\r\n                            initial={{ opacity: 0, y: 50 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            transition={{ delay: displayIndex * 0.15, type: 'spring' }}\r\n                        >\r\n                            <div\r\n                                className={`relative rounded-2xl border-2 ${config.borderColor} bg-gradient-to-b from-slate-800/80 to-slate-900/90 backdrop-blur-sm overflow-hidden cursor-pointer group transition-all duration-300 hover:scale-[1.02] ${config.bgGlow} shadow-xl ${config.height}`}\r\n                                onClick={() => onSelectStock(stock)}\r\n                            >\r\n                                {/* Top Gradient Bar */}\r\n                                <div className={`h-1.5 bg-gradient-to-r ${config.gradient}`} />\r\n\r\n                                {/* Medal Badge */}\r\n                                <div className=\"absolute -top-1 left-1/2 -translate-x-1/2\">\r\n                                    <div className={`${config.badgeBg} text-black px-4 py-1 rounded-b-xl font-bold text-sm flex items-center gap-1`}>\r\n                                        <MedalIcon className=\"w-4 h-4\" />\r\n                                        {place + 1}¬∫ {config.label}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Content */}\r\n                                <div className=\"p-6 pt-10 h-full flex flex-col\">\r\n                                    {/* Ticker & Sector */}\r\n                                    <div className=\"text-center mb-4\">\r\n                                        <h3 className={`text-3xl font-black ${config.textColor} mb-1`}>\r\n                                            {stock.papel}\r\n                                        </h3>\r\n                                        <p className=\"text-white/50 text-sm\">{stock.setor || 'Sem setor'}</p>\r\n                                    </div>\r\n\r\n                                    {/* Super Score */}\r\n                                    <div className=\"text-center mb-4\">\r\n                                        <div className={`inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r ${config.gradient} text-black font-bold`}>\r\n                                            <Zap className=\"w-4 h-4\" />\r\n                                            <span className=\"text-xl\">{stock.super_score?.toFixed(1)}</span>\r\n                                        </div>\r\n                                        <p className=\"text-white/40 text-xs mt-1\">Super Score</p>\r\n                                    </div>\r\n\r\n                                    {/* Insight */}\r\n                                    <div className=\"text-center mb-4 px-2\">\r\n                                        <div className={`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/5 border border-white/10`}>\r\n                                            <TrendingUp className={`w-4 h-4 ${config.textColor}`} />\r\n                                            <span className=\"text-sm text-white/80\">{generateInsight(stock, place)}</span>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Key Metrics */}\r\n                                    <div className=\"grid grid-cols-2 gap-3 mb-4\">\r\n                                        <div className=\"bg-white/5 rounded-lg p-2 text-center\">\r\n                                            <p className=\"text-white/40 text-xs\">Cota√ß√£o</p>\r\n                                            <p className=\"text-white font-bold\">R$ {stock.cotacao?.toFixed(2)}</p>\r\n                                        </div>\r\n                                        <div className=\"bg-white/5 rounded-lg p-2 text-center\">\r\n                                            <p className=\"text-white/40 text-xs\">P/L</p>\r\n                                            <p className=\"text-white font-bold\">{stock.p_l?.toFixed(1)}x</p>\r\n                                        </div>\r\n                                        <div className=\"bg-white/5 rounded-lg p-2 text-center\">\r\n                                            <p className=\"text-white/40 text-xs\">DY</p>\r\n                                            <p className=\"text-green-400 font-bold\">{stock.dividend_yield?.toFixed(1)}%</p>\r\n                                        </div>\r\n                                        <div className=\"bg-white/5 rounded-lg p-2 text-center\">\r\n                                            <p className=\"text-white/40 text-xs\">ROE</p>\r\n                                            <p className=\"text-cyan-400 font-bold\">{stock.roe?.toFixed(1)}%</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Strategy Scores */}\r\n                                    <div className=\"mt-auto space-y-2\">\r\n                                        <p className=\"text-xs text-white/40 mb-2\">Scores por Estrat√©gia</p>\r\n                                        <ScoreBar label=\"Graham\" value={stock.score_graham || 0} max={5} color=\"bg-blue-500\" />\r\n                                        <ScoreBar label=\"Greenblatt\" value={stock.score_greenblatt || 0} max={5} color=\"bg-purple-500\" />\r\n                                        <ScoreBar label=\"Bazin\" value={stock.score_bazin || 0} max={5} color=\"bg-green-500\" />\r\n                                        <ScoreBar label=\"Qualidade\" value={stock.score_qualidade || 0} max={7} color=\"bg-yellow-500\" />\r\n                                    </div>\r\n\r\n                                    {/* CTA */}\r\n                                    <motion.div\r\n                                        className=\"mt-4 text-center opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                                    >\r\n                                        <span className=\"text-xs text-cyan-400\">Clique para ver detalhes ‚Üí</span>\r\n                                    </motion.div>\r\n                                </div>\r\n                            </div>\r\n                        </motion.div>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* Why Top 3 explanation */}\r\n            <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: 0.5 }}\r\n                className=\"mt-8 text-center\"\r\n            >\r\n                <div className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-cyan-500/10 border border-cyan-500/20\">\r\n                    <Target className=\"w-4 h-4 text-cyan-400\" />\r\n                    <span className=\"text-sm text-white/70\">\r\n                        Ranking baseado em <span className=\"text-cyan-400 font-medium\">Graham</span>,\r\n                        <span className=\"text-purple-400 font-medium\"> Greenblatt</span>,\r\n                        <span className=\"text-green-400 font-medium\"> Bazin</span> e\r\n                        <span className=\"text-yellow-400 font-medium\"> Qualidade</span>\r\n                    </span>\r\n                </div>\r\n            </motion.div>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst ScoreBar = ({ label, value, max, color }: { label: string; value: number; max: number; color: string }) => (\r\n    <div className=\"space-y-1\">\r\n        <div className=\"flex justify-between text-xs\">\r\n            <span className=\"text-white/50\">{label}</span>\r\n            <span className=\"text-white/70 font-medium\">{value.toFixed(1)}</span>\r\n        </div>\r\n        <div className=\"h-1.5 bg-white/10 rounded-full overflow-hidden\">\r\n            <motion.div\r\n                className={`h-full rounded-full ${color}`}\r\n                initial={{ width: 0 }}\r\n                animate={{ width: `${(value / max) * 100}%` }}\r\n                transition={{ duration: 0.8, delay: 0.3 }}\r\n            />\r\n        </div>\r\n    </div>\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\components\\ToxicStocks.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\rauli\\.gemini\\antigravity\\scratch\\acoes\\frontend\\src\\lib\\supabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]